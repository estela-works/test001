import{u as k}from"./userStore-CpLz27gy.js";import{d as f,q as U,b as c,a as e,h as w,v as x,i as C,o as l,_ as h,l as m,t as v,s as D,e as _,c as y,p,m as S,F as V,k as N,w as $,r as B}from"./index-DBKnUi_6.js";import{E as F,L}from"./ErrorMessage-h6aG8_qh.js";const A={class:"add-form card"},E=f({__name:"UserForm",emits:["submit"],setup(u,{emit:t}){const s=t,n=U(""),d=()=>{const a=n.value.trim();if(!a){alert("ユーザー名を入力してください");return}if(a.length>100){alert("100文字以内で入力してください");return}s("submit",a),n.value=""};return(a,r)=>(l(),c("div",A,[r[1]||(r[1]=e("h3",null,"新しいユーザーを追加",-1)),w(e("input",{"onUpdate:modelValue":r[0]||(r[0]=i=>n.value=i),type:"text",placeholder:"ユーザー名を入力してください",maxlength:"100",onKeypress:C(d,["enter"])},null,544),[[x,n.value]]),e("button",{class:"btn-primary",onClick:d},"追加")]))}}),I=h(E,[["__scopeId","data-v-d0516533"]]),M={class:"user-card card"},j={class:"user-info"},K=f({__name:"UserCard",props:{user:{}},emits:["delete"],setup(u,{emit:t}){const s=u,n=t,d=m(()=>new Date(s.user.createdAt).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})),a=()=>{confirm("このユーザーを削除しますか？紐づいたチケットの担当者は未割当になります。")&&n("delete",s.user.id)};return(r,i)=>(l(),c("div",M,[e("div",j,[e("h3",null,v(u.user.name),1),e("p",null,"登録日: "+v(d.value),1)]),e("div",{class:"actions"},[e("button",{class:"delete-btn btn-danger",onClick:a},"削除")])]))}}),T=h(K,[["__scopeId","data-v-e8218e9b"]]),q={class:"container"},J={class:"stats card"},P={key:1},z={key:0,class:"empty-message"},G={class:"back-link"},H=f({__name:"UserView",setup(u){const t=k(),s=m(()=>t.users),n=m(()=>t.loading),d=m(()=>t.error),a=async i=>{try{await t.addUser(i)}catch{}},r=async i=>{try{await t.deleteUser(i)}catch{}};return D(async()=>{await t.fetchUsers()}),(i,o)=>{const b=B("router-link");return l(),c("div",q,[o[3]||(o[3]=e("h1",null,"ユーザー管理",-1)),e("div",J,[e("span",null,[o[0]||(o[0]=p("登録ユーザー数: ",-1)),e("strong",null,v(s.value.length),1),o[1]||(o[1]=p("人",-1))])]),_(I,{onSubmit:a}),_(F,{message:d.value},null,8,["message"]),n.value?(l(),y(L,{key:0})):(l(),c("div",P,[s.value.length===0?(l(),c("p",z,"ユーザーが登録されていません。")):S("",!0),(l(!0),c(V,null,N(s.value,g=>(l(),y(T,{key:g.id,user:g,onDelete:r},null,8,["user"]))),128))])),e("div",G,[_(b,{to:"/projects"},{default:$(()=>[...o[2]||(o[2]=[p("← 案件一覧に戻る",-1)])]),_:1})])])}}}),W=h(H,[["__scopeId","data-v-6eb0bb70"]]);export{W as default};
