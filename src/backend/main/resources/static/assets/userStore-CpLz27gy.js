import{f as t}from"./index-DBKnUi_6.js";import{d as s,a,g as o}from"./ErrorMessage-h6aG8_qh.js";async function i(){return o("/users")}async function n(r){return a("/users",{name:r})}async function l(r){return s(`/users/${r}`)}const h=t("user",{state:()=>({users:[],loading:!1,error:null}),getters:{userCount:r=>r.users.length},actions:{async fetchUsers(){this.loading=!0,this.error=null;try{this.users=await i()}catch(r){throw this.error="ユーザーリストの読み込みに失敗しました",r}finally{this.loading=!1}},async addUser(r){this.error=null;try{await n(r),await this.fetchUsers()}catch(e){throw e&&typeof e=="object"&&"status"in e&&e.status===409?this.error="同じ名前のユーザーが既に存在します":this.error="ユーザーの追加に失敗しました",e}},async deleteUser(r){this.error=null;try{await l(r),await this.fetchUsers()}catch(e){throw this.error="ユーザーの削除に失敗しました",e}},clearError(){this.error=null}}});export{h as u};
