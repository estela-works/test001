import{q as a}from"./index-D1rnpmQv.js";import{a as s,b as o,d as c,c as h,e as i}from"./projectService--dyVZNgQ.js";const r={total:0,completed:0,progressRate:0},j=a("project",{state:()=>({projects:[],loading:!1,error:null,projectStats:{},noProjectStats:{...r}}),actions:{async fetchProjects(){this.loading=!0,this.error=null;try{this.projects=await i(),await this.fetchAllStats()}catch(t){throw this.error="案件リストの読み込みに失敗しました",t}finally{this.loading=!1}},async createProject(t){this.error=null;try{await h(t),await this.fetchProjects()}catch(e){throw this.error="案件の作成に失敗しました",e}},async deleteProject(t){this.error=null;try{await c(t),await this.fetchProjects()}catch(e){throw this.error="案件の削除に失敗しました",e}},async fetchProjectStats(t){try{const e=await o(t);this.projectStats[t]=e}catch{this.projectStats[t]={...r}}},async fetchAllStats(){await Promise.all([...this.projects.map(t=>this.fetchProjectStats(t.id)),this.fetchNoProjectStats()])},async fetchNoProjectStats(){try{this.noProjectStats=await s()}catch{this.noProjectStats={...r}}},clearError(){this.error=null}}});export{j as u};
