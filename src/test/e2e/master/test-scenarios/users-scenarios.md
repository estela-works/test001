# ユーザー管理画面 テストシナリオ

## 対象画面
- 画面ID: SCR-USERS-001
- 画面名: ユーザー管理画面
- 画面仕様: ../screen-spec/users-screen.json

---

## TC-001: 画面初期表示確認

### 前提条件
- なし

### 手順
1. [開く] /users.html
2. [待機] #loading が非表示になる

### 期待結果
- ユーザー追加フォームが表示される
- 登録ユーザー数統計が表示される
- 案件一覧へのリンクが表示される

---

## TC-010: ユーザー追加（正常系）

### 前提条件
- ユーザー管理画面を開いている

### 手順
1. [入力] #name-input に「テストユーザー」を入力
2. [クリック] .add-form button

### 期待結果
- 入力欄がクリアされる
- ユーザーリストに「テストユーザー」が追加される
- 登録ユーザー数が1増加する
- 登録日が表示される

---

## TC-011: ユーザー追加（Enterキー）

### 前提条件
- ユーザー管理画面を開いている

### 手順
1. [入力] #name-input に「Enterテストユーザー」を入力
2. [キー押下] Enter キー

### 期待結果
- 入力欄がクリアされる
- ユーザーリストに「Enterテストユーザー」が追加される

---

## TC-020: ユーザー削除（確認OK）

### 前提条件
- ユーザー管理画面を開いている
- ユーザーが1名以上登録されている

### 手順
1. [クリック] .user-card:first-of-type .delete-btn
2. [ダイアログ] 確認ダイアログで「OK」を選択

### 期待結果
- ユーザーがリストから削除される
- 登録ユーザー数が1減少する

---

## TC-021: ユーザー削除（確認キャンセル）

### 前提条件
- ユーザー管理画面を開いている
- ユーザーが1名以上登録されている

### 手順
1. [クリック] .user-card:first-of-type .delete-btn
2. [ダイアログ] 確認ダイアログで「キャンセル」を選択

### 期待結果
- ユーザーは削除されない
- 登録ユーザー数は変化しない

---

## TC-022: ユーザー削除（担当チケットの未割当化）

### 前提条件
- ユーザー管理画面を開いている
- 「削除対象ユーザー」が登録されている
- 「削除対象ユーザー」が担当のチケットが1件以上存在する

### 手順
1. [クリック] .user-card:has-text('削除対象ユーザー') .delete-btn
2. [ダイアログ] 確認ダイアログで「OK」を選択

### 期待結果
- ユーザーがリストから削除される
- 担当していたチケットの担当者が「未割当」になる

---

## TC-100: バリデーション（ユーザー名未入力）

### 前提条件
- ユーザー管理画面を開いている

### 手順
1. [クリック] .add-form button（ユーザー名未入力のまま）

### 期待結果
- エラーメッセージ「ユーザー名を入力してください。」が表示される
- ユーザーは追加されない

---

## TC-101: バリデーション（重複ユーザー名）

### 前提条件
- ユーザー管理画面を開いている
- 「既存ユーザー」という名前のユーザーが登録されている

### 手順
1. [入力] #name-input に「既存ユーザー」を入力
2. [クリック] .add-form button

### 期待結果
- エラーメッセージ「同じ名前のユーザーが既に存在します。」が表示される
- ユーザーは追加されない

---

## TC-102: バリデーション（文字数上限）

### 前提条件
- ユーザー管理画面を開いている

### 手順
1. [入力] #name-input に101文字以上の文字列を入力
2. [クリック] .add-form button

### 期待結果
- エラーメッセージ「ユーザー名は100文字以内で入力してください。」が表示される
- ユーザーは追加されない

---

## TC-200: 空の状態表示

### 前提条件
- ユーザーが1名も登録されていない

### 手順
1. [開く] /users.html
2. [待機] #loading が非表示になる

### 期待結果
- 「ユーザーが登録されていません。」が表示される
- 登録ユーザー数が「0人」と表示される

---

## TC-300: 画面遷移（案件一覧へ戻る）

### 前提条件
- ユーザー管理画面を開いている

### 手順
1. [クリック] .back-link a

### 期待結果
- URLが /projects.html に変わる
- 案件一覧画面が表示される
