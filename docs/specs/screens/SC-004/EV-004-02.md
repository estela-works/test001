# EV-004-02: ユーザー追加

> **ドキュメント種別**: 最新仕様（継続的にメンテナンス）

## 1. 基本情報

| 項目 | 内容 |
|------|------|
| イベントID | EV-004-02 |
| イベント名 | ユーザー追加 |
| 画面 | SC-004: ユーザー管理画面 |
| トリガー | 追加ボタンクリック / Enterキー |

---

## 2. 処理フロー

```
1. 入力値取得
   └→ ユーザー名（必須）
2. バリデーション
   └→ ユーザー名が空の場合 → エラー表示
   └→ ユーザー名が100文字超の場合 → エラー表示
3. API呼び出し
   └→ POST /api/users
4. 成功時
   └→ フォームクリア
   └→ loadUsers() で一覧再取得
5. 失敗時（409 Conflict）
   └→ 「同じ名前のユーザーが既に存在します。」表示
6. 失敗時（その他）
   └→ エラーメッセージ表示
```

---

## 3. 使用API

| API | メソッド | リクエスト | レスポンス |
|-----|---------|-----------|-----------|
| /api/users | POST | { name } | 作成されたUser |

---

## 4. バリデーション

| 項目 | ルール | エラーメッセージ |
|------|--------|----------------|
| ユーザー名 | 必須（空白不可） | 「ユーザー名を入力してください。」 |
| ユーザー名 | 最大100文字 | 「ユーザー名は100文字以内で入力してください。」 |

---

## 5. エラー処理

| エラー | HTTP Status | 対応 |
|--------|-------------|------|
| バリデーションエラー | - | エラーメッセージ表示（5秒後消去） |
| 重複エラー | 409 | 「同じ名前のユーザーが既に存在します。」表示（5秒後消去） |
| API失敗 | 4xx/5xx | 「ユーザーの追加に失敗しました。」表示（5秒後消去） |
| ネットワークエラー | - | 「ネットワークエラーが発生しました。」表示（5秒後消去） |

---

## 更新履歴

| 日付 | 変更内容 | 関連案件 |
|------|----------|----------|
| 2025-12-23 | 新規作成 | 202512_担当者機能追加 |
