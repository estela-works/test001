# EV-003-01: 初期読込

> **ドキュメント種別**: 最新仕様（継続的にメンテナンス）

## 1. 基本情報

| 項目 | 内容 |
|------|------|
| イベントID | EV-003-01 |
| イベント名 | 初期読込 |
| 画面 | SC-003: プロジェクト画面 |
| トリガー | window.onload（ページロード完了時） |

---

## 2. 処理フロー

```
1. ページロード完了
2. loadProjects() 呼び出し
   └→ GET /api/projects
   └→ 各案件に対して GET /api/projects/{id}/stats
   └→ レスポンスを受け取りカード描画
3. loadNoProjectStats() 呼び出し
   └→ GET /api/todos?projectId=none
   └→ 未分類チケットの統計を計算・表示
```

---

## 3. 使用API

| API | メソッド | リクエスト | レスポンス |
|-----|---------|-----------|-----------|
| /api/projects | GET | なし | Project配列 |
| /api/projects/{id}/stats | GET | なし | { total, completed, progressRate } |
| /api/todos?projectId=none | GET | なし | Todo配列（未分類） |

---

## 4. エラー処理

| エラー | 対応 |
|--------|------|
| 案件取得失敗 | 「案件リストの読み込みに失敗しました。」表示（5秒後消去） |
| 統計取得失敗 | 統計を { total: 0, completed: 0, progressRate: 0 } で代替 |
| ネットワークエラー | 「ネットワークエラーが発生しました。」表示（5秒後消去） |

---

## 更新履歴

| 日付 | 変更内容 | 関連案件 |
|------|----------|----------|
| 2025-12-23 | 新規作成 | 202512_プロジェクト機能追加 |
