# テストケース集積

> **ドキュメント種別**: 最新仕様（継続的にメンテナンス）

## 1. 概要

| 項目 | 内容 |
|------|------|
| テストフレームワーク | JUnit 5 + AssertJ |
| 最終更新日 | 2025-12-22 |

---

## 2. テストケース統計

### 2.1 サマリー

| 対象クラス | 正常系 | 異常系 | 境界値 | 合計 |
|-----------|--------|--------|--------|------|
| TodoService | 23 | 5 | 10 | 38 |
| **合計** | **23** | **5** | **10** | **38** |

---

## 3. TodoService テストケース

### 3.1 getAllTodos() - 全ToDo取得

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| GT-001 | 初期状態で取得 | 正常系 | サンプルデータ3件が存在 | 3件が作成日時順で返却 | 初期構築 |
| GT-002 | 全削除後に取得 | 境界値 | 全ToDoを削除済み | 空のリストが返却 | 初期構築 |
| GT-003 | 新規追加後に取得 | 正常系 | サンプル3件 + 新規1件 | 4件が作成日時順で返却 | 初期構築 |

### 3.2 getTodosByCompleted(boolean completed) - 完了状態でフィルタリング

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| GC-001 | completed=falseでフィルタ | 正常系 | 1件を完了状態に変更 | 未完了のToDoのみ返却（2件） | 初期構築 |
| GC-002 | completed=trueでフィルタ | 正常系 | 2件を完了状態に変更 | 完了済みのToDoのみ返却（2件） | 初期構築 |
| GC-003 | 該当なしの場合 | 境界値 | 全て未完了 | 空のリストが返却 | 初期構築 |
| GC-004 | 結果が作成日時順でソート | 正常系 | サンプルデータ3件が存在 | ソート順が正しい | 初期構築 |

### 3.3 getTodoById(Long id) - ID指定で取得

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| GI-001 | 存在するIDで取得 | 正常系 | ID=1が存在 | 該当のTodoが返却 | 初期構築 |
| GI-002 | 存在しないIDで取得 | 異常系 | ID=999は存在しない | nullが返却 | 初期構築 |
| GI-003 | nullのIDで取得 | 異常系 | - | NullPointerException | 初期構築 |

### 3.4 createTodo(Todo todo) - 新規作成

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| CT-001 | 正常なToDoを作成 | 正常系 | title, descriptionを設定 | IDが自動採番（4）され返却 | 初期構築 |
| CT-002 | 連続作成時のID採番 | 正常系 | 3件連続で作成 | IDが連番（4, 5, 6） | 初期構築 |
| CT-003 | null値のToDo作成 | 境界値 | フィールドがnull | nullのまま作成 | 初期構築 |

### 3.5 updateTodo(Long id, Todo updatedTodo) - 更新

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| UT-001 | 存在するToDoを更新 | 正常系 | ID=1が存在 | 更新されたTodoが返却 | 初期構築 |
| UT-002 | 全フィールドを更新 | 正常系 | ID=1が存在 | 全フィールドが正しく更新 | 初期構築 |
| UT-003 | 存在しないIDで更新 | 異常系 | ID=999は存在しない | nullが返却 | 初期構築 |
| UT-004 | createdAtが保持される | 境界値 | ID=1が存在 | createdAtは元の値を維持 | 初期構築 |

### 3.6 toggleComplete(Long id) - 完了状態切り替え

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| TC-001 | 未完了→完了に切り替え | 正常系 | ID=1が未完了 | completed=true | 初期構築 |
| TC-002 | 完了→未完了に切り替え | 正常系 | ID=1が完了状態 | completed=false | 初期構築 |
| TC-003 | 存在しないIDで切り替え | 異常系 | ID=999は存在しない | nullが返却 | 初期構築 |
| TC-004 | 2回連続切り替え | 境界値 | ID=1が未完了 | 元の状態に戻る | 初期構築 |

### 3.7 deleteTodo(Long id) - 削除

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| DT-001 | 存在するToDoを削除 | 正常系 | ID=1が存在、総数3 | 削除されたTodoが返却、総数が2 | 初期構築 |
| DT-002 | 存在しないIDで削除 | 異常系 | ID=999は存在しない | nullが返却 | 初期構築 |
| DT-003 | 削除後に同じIDで取得 | 正常系 | ID=1を削除済み | nullが返却 | 初期構築 |

### 3.8 deleteAllTodos() - 全削除

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| DA-001 | 全ToDoを削除 | 正常系 | 3件が存在 | 総数が0 | 初期構築 |
| DA-002 | 空の状態で全削除 | 境界値 | 0件 | エラーなく完了、総数は0 | 初期構築 |

### 3.9 getTotalCount() - 総数取得

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| CN-001 | 初期状態で取得 | 正常系 | サンプル3件 | 3が返却 | 初期構築 |
| CN-002 | 追加後に取得 | 正常系 | 1件追加後 | 4が返却 | 初期構築 |
| CN-003 | 削除後に取得 | 正常系 | 1件削除後 | 2が返却 | 初期構築 |
| CN-004 | 全削除後に取得 | 境界値 | 全削除後 | 0が返却 | 初期構築 |

### 3.10 getCompletedCount() - 完了数取得

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| CC-001 | 初期状態（全て未完了） | 正常系 | サンプル3件（全て未完了） | 0が返却 | 初期構築 |
| CC-002 | 1件完了後 | 正常系 | 1件を完了に変更 | 1が返却 | 初期構築 |
| CC-003 | 全件完了後 | 正常系 | 全3件を完了に変更 | 3が返却 | 初期構築 |
| CC-004 | 全削除後 | 境界値 | 全削除後 | 0が返却 | 初期構築 |

### 3.11 getPendingCount() - 未完了数取得

| ID | テストケース | 分類 | 前提条件 | 期待結果 | 追加案件 |
|----|-------------|------|----------|----------|----------|
| PC-001 | 初期状態（全て未完了） | 正常系 | サンプル3件（全て未完了） | 3が返却 | 初期構築 |
| PC-002 | 1件完了後 | 正常系 | 1件を完了に変更 | 2が返却 | 初期構築 |
| PC-003 | 全件完了後 | 境界値 | 全3件を完了に変更 | 0が返却 | 初期構築 |
| PC-004 | 計算結果の検証 | 正常系 | 1件を完了に変更 | total - completed と一致 | 初期構築 |

---

## 4. テスト実行方法

```bash
# 全テスト実行
./mvnw test

# 特定クラスのテスト実行
./mvnw test -Dtest=TodoServiceTest

# 特定メソッドのテスト実行
./mvnw test -Dtest=TodoServiceTest#getAllTodos*
```

---

## 更新履歴

| 日付 | 変更内容 | 関連案件 |
|------|----------|----------|
| 2025-12-22 | 初版作成（TodoService: 38ケース） | 初期構築 |
