# Controller層テストケース

[← 目次に戻る](./README.md)

---

## 1. TodoController テストケース

> **ファイル**: `src/test/java/com/example/demo/TodoControllerTest.java`

### 1.1 GET /api/todos

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-001 | 全件取得 | 正常系 | 200 OK、JSON配列 |
| A-002 | completed=trueでフィルタ | 正常系 | 200 OK、完了のみ |
| A-003 | completed=falseでフィルタ | 正常系 | 200 OK、未完了のみ |

### 1.2 GET /api/todos/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-004 | 存在するID | 正常系 | 200 OK、該当Todo |
| A-005 | 存在しないID | 異常系 | 404 Not Found |

### 1.3 POST /api/todos

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-006 | 正常な新規作成 | 正常系 | 201 Created |
| A-007 | title空で作成 | 異常系 | 400 Bad Request |
| A-007b | title nullで作成 | 異常系 | 400 Bad Request |

### 1.4 PUT /api/todos/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-008 | 正常更新 | 正常系 | 200 OK |
| A-009 | 存在しないIDで更新 | 異常系 | 404 Not Found |

### 1.5 PATCH /api/todos/{id}/toggle

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-010 | 完了切替（2回連続） | 正常系 | 200 OK、状態トグル |
| A-011 | 存在しないIDで切替 | 異常系 | 404 Not Found |

### 1.6 DELETE /api/todos/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-012 | 正常削除 | 正常系 | 204 No Content |
| A-013 | 存在しないIDで削除 | 正常系 | 404 Not Found |

### 1.7 DELETE /api/todos

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-014 | 全件削除 | 正常系 | 204 No Content |

### 1.8 GET /api/todos/stats

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| A-015 | 統計取得 | 正常系 | 200 OK、total/completed/pending |

### 1.9 案件フィルタ

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-TC-001 | projectIdで案件別取得 | 正常系 | 該当案件のみ返却 |
| IT-TC-002 | projectId=noneで未分類取得 | 正常系 | 未分類のみ返却 |
| IT-TC-003 | 存在しない案件IDで空配列 | 正常系 | 空配列返却 |

### 1.10 日付バリデーション（API）

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-TC-004 | dueDate < startDateで400 | 異常系 | 400 Bad Request |
| IT-TC-005 | 正常な日付範囲で201 | 正常系 | 201 Created |

### 1.11 担当者関連

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-20 | 担当者付きで作成 | 正常系 | 201 Created、assigneeName含む |
| IT-21 | 担当者なしで作成 | 正常系 | 201 Created |
| IT-22 | 存在しない担当者IDで400 | 異常系 | 400 Bad Request |
| IT-23 | 担当者変更 | 正常系 | 200 OK、新assigneeName |
| IT-24 | 担当者解除 | 正常系 | 200 OK、assigneeId=null |
| IT-25 | 一覧に担当者名含む | 正常系 | assigneeName含む |

### 1.12 後方互換性テスト

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-30 | 既存形式で作成 | 正常系 | 201 Created |
| IT-31 | 既存の完了切替 | 正常系 | 200 OK |
| IT-32 | 既存の削除 | 正常系 | 204 No Content |

---

## 2. UserController テストケース

> **ファイル**: `src/test/java/com/example/demo/UserControllerTest.java`

### 2.1 GET /api/users

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-01 | ユーザー一覧取得 | 正常系 | 200 OK、3件以上 |

### 2.2 GET /api/users/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-02 | 存在するIDで取得 | 正常系 | 200 OK |
| IT-03 | 存在しないIDで404 | 異常系 | 404 Not Found |

### 2.3 POST /api/users

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-04 | 正常なユーザー作成 | 正常系 | 201 Created |
| IT-05 | 名前が空で400 | 異常系 | 400 Bad Request |
| IT-05b | 名前がnullで400 | 異常系 | 400 Bad Request |
| IT-05c | 名前が空白のみで400 | 異常系 | 400 Bad Request |
| IT-06 | 重複名前で409 | 異常系 | 409 Conflict |
| IT-07 | 100文字の名前で登録 | 正常系 | 201 Created |
| IT-08 | 101文字の名前で400 | 異常系 | 400 Bad Request |

### 2.4 DELETE /api/users/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-09 | ユーザー削除 | 正常系 | 204 No Content |
| IT-10 | 存在しないIDで404 | 異常系 | 404 Not Found |
| IT-11 | 削除時に担当解除 | 正常系 | ToDoのassigneeId=null |

---

## 3. ProjectController テストケース

> **ファイル**: `src/test/java/com/example/demo/ProjectControllerTest.java`

### 3.1 GET /api/projects

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-PC-001 | 全案件取得 | 正常系 | 200 OK |
| IT-PC-002 | 案件0件で空配列 | 正常系 | 200 OK、空配列 |

### 3.2 GET /api/projects/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-PC-003 | 存在するIDで取得 | 正常系 | 200 OK |
| IT-PC-004 | 存在しないIDで404 | 異常系 | 404 Not Found |

### 3.3 POST /api/projects

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-PC-005 | 正常作成 | 正常系 | 201 Created |
| IT-PC-005b | name空で400 | 異常系 | 400 Bad Request |
| IT-PC-005c | name nullで400 | 異常系 | 400 Bad Request |

### 3.4 PUT /api/projects/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-PC-006 | 正常更新 | 正常系 | 200 OK |
| IT-PC-006b | 存在しないIDで404 | 異常系 | 404 Not Found |

### 3.5 DELETE /api/projects/{id}

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-PC-007 | 正常削除 | 正常系 | 204 No Content |
| IT-PC-007b | 存在しないIDで404 | 正常系 | 404 Not Found |
| IT-PC-007c | 配下チケットありでカスケード削除 | 正常系 | 配下チケットも削除 |

### 3.6 GET /api/projects/{id}/stats

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| IT-PC-008 | 統計取得 | 正常系 | 200 OK |
| IT-PC-008b | チケット0件で統計取得 | 正常系 | 0値の統計 |
| IT-PC-008c | 存在しない案件IDで404 | 異常系 | 404 Not Found |

---

[← 目次に戻る](./README.md)
