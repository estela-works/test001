# Service層テストケース

[← 目次に戻る](./README.md)

---

## 1. TodoService テストケース

> **ファイル**: `src/test/java/com/example/demo/TodoServiceTest.java`

### 1.1 getAllTodos()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| GT-001 | 初期状態で取得 | 正常系 | 3件が作成日時順で返却 |
| GT-002 | 全削除後に取得 | 境界値 | 空のリストが返却 |
| GT-003 | 新規追加後に取得 | 正常系 | 4件が作成日時順で返却 |

### 1.2 getTodosByCompleted()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| GC-001 | completed=falseでフィルタ | 正常系 | 未完了のToDoのみ返却 |
| GC-002 | completed=trueでフィルタ | 正常系 | 完了済みのToDoのみ返却 |
| GC-003 | 該当なしの場合 | 境界値 | 空のリストが返却 |
| GC-004 | 結果が作成日時順でソート | 正常系 | ソート順が正しい |

### 1.3 getTodoById()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| GI-001 | 存在するIDで取得 | 正常系 | 該当のTodoが返却 |
| GI-002 | 存在しないIDで取得 | 異常系 | nullが返却 |

### 1.4 createTodo()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| CT-001 | 正常なToDoを作成 | 正常系 | IDが自動採番され返却 |
| CT-002 | 連続作成時のID採番 | 正常系 | IDが連番 |

### 1.5 updateTodo()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| UT-001 | 存在するToDoを更新 | 正常系 | 更新されたTodoが返却 |
| UT-002 | 全フィールドを更新 | 正常系 | 全フィールドが正しく更新 |
| UT-003 | 存在しないIDで更新 | 異常系 | nullが返却 |
| UT-004 | createdAtが保持される | 境界値 | createdAtは元の値を維持 |

### 1.6 toggleComplete()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-001 | 未完了→完了に切り替え | 正常系 | completed=true |
| TC-002 | 完了→未完了に切り替え | 正常系 | completed=false |
| TC-003 | 存在しないIDで切り替え | 異常系 | nullが返却 |
| TC-004 | 2回連続切り替え | 境界値 | 元の状態に戻る |

### 1.7 deleteTodo()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| DT-001 | 存在するToDoを削除 | 正常系 | 削除されたTodoが返却 |
| DT-002 | 存在しないIDで削除 | 正常系 | nullが返却 |
| DT-003 | 削除後に同じIDで取得 | 正常系 | nullが返却 |

### 1.8 deleteAllTodos()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| DA-001 | 全ToDoを削除 | 正常系 | 総数が0 |
| DA-002 | 空の状態で全削除 | 境界値 | エラーなく完了 |

### 1.9 getTotalCount() / getCompletedCount() / getPendingCount()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| CN-001 | 初期状態で取得 | 正常系 | 3が返却 |
| CN-002 | 追加後に取得 | 正常系 | 4が返却 |
| CN-003 | 削除後に取得 | 正常系 | 2が返却 |
| CN-004 | 全削除後に取得 | 境界値 | 0が返却 |
| CC-001 | 初期状態（全て未完了） | 正常系 | 0が返却 |
| CC-002 | 1件完了後 | 正常系 | 1が返却 |
| CC-003 | 全件完了後 | 正常系 | 3が返却 |
| CC-004 | 全削除後 | 境界値 | 0が返却 |
| PC-001 | 初期状態（全て未完了） | 正常系 | 3が返却 |
| PC-002 | 1件完了後 | 正常系 | 2が返却 |
| PC-003 | 全件完了後 | 境界値 | 0が返却 |
| PC-004 | 計算結果の検証 | 正常系 | total - completedと一致 |

### 1.10 getTodosByProjectId()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-TS-001 | 案件IDで該当チケット取得 | 正常系 | 該当案件のみ返却 |
| TC-TS-002 | 案件ID=nullで未分類取得 | 正常系 | 未分類のみ返却 |
| TC-TS-003 | 存在しない案件IDで空リスト | 正常系 | 空リスト返却 |

### 1.11 日付バリデーション

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-TS-004 | 開始日=終了日でバリデーション通過 | 正常系 | 正常に作成 |
| TC-TS-005 | 開始日<終了日でバリデーション通過 | 正常系 | 正常に作成 |
| TC-TS-006 | 開始日>終了日でエラー | 境界値 | IllegalArgumentException |
| TC-TS-007 | 開始日のみ設定 | 正常系 | 正常に作成 |
| TC-TS-008 | 終了日のみ設定 | 正常系 | 正常に作成 |
| TC-TS-009 | 両方nullで通過 | 境界値 | 正常に作成 |

### 1.12 日付付き作成・更新

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-TS-010 | 開始日・終了日を設定して作成 | 正常系 | 日付が正しく保存 |
| TC-TS-011 | 案件IDを設定して作成 | 正常系 | 案件が紐づく |
| TC-TS-012 | 日付フィールドを更新 | 正常系 | 日付が更新 |
| TC-TS-013 | 案件IDを更新 | 正常系 | 案件が変更 |
| TC-TS-014 | 更新時に不正な日付範囲 | 境界値 | IllegalArgumentException |

---

## 2. UserService テストケース

> **ファイル**: `src/test/java/com/example/demo/UserServiceTest.java`

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-S01 | 全ユーザー一覧取得 | 正常系 | 初期データ含む |
| TC-S02 | 存在するIDでユーザー取得 | 正常系 | 該当User返却 |
| TC-S02b | 存在しないIDでnull | 異常系 | null返却 |
| TC-S03 | ユーザー正常作成 | 正常系 | ID付与、createdAt設定 |
| TC-S04 | 存在するユーザー名でtrue | 正常系 | true返却 |
| TC-S05 | 存在しないユーザー名でfalse | 正常系 | false返却 |
| TC-S06 | 存在するユーザー削除 | 正常系 | 削除成功 |
| TC-S07 | 存在しないIDで削除 | 異常系 | null返却 |

---

## 3. ProjectService テストケース

> **ファイル**: `src/test/java/com/example/demo/ProjectServiceTest.java`

### 3.1 getAllProjects()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-PS-001 | 登録済み案件を作成日時降順で取得 | 正常系 | 降順で返却 |
| TC-PS-002 | 案件0件で空リスト | 境界値 | 空リスト返却 |

### 3.2 getProjectById()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-PS-003 | 存在するIDで案件取得 | 正常系 | 該当Project返却 |
| TC-PS-004 | 存在しないIDでnull | 異常系 | null返却 |

### 3.3 createProject()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-PS-005 | 正常な案件作成 | 正常系 | ID付与、createdAt設定 |
| TC-PS-006 | descriptionがnullで作成 | 正常系 | 正常に作成 |

### 3.4 updateProject()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-PS-007 | 存在する案件を更新 | 正常系 | 更新成功 |
| TC-PS-008 | 存在しないIDでnull | 異常系 | null返却 |

### 3.5 deleteProject()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-PS-009 | 配下チケットなしの案件削除 | 正常系 | 削除成功 |
| TC-PS-010 | 案件削除時にカスケード削除 | 正常系 | 配下チケットも削除 |
| TC-PS-011 | 存在しないIDでnull | 正常系 | null返却 |

### 3.6 getProjectStats()

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-PS-012 | 全て未完了の場合の統計 | 正常系 | progressRate=0 |
| TC-PS-013 | 一部完了の場合の統計・進捗率 | 正常系 | 正しい進捗率 |
| TC-PS-014 | 全て完了の場合の進捗率100% | 正常系 | progressRate=100 |
| TC-PS-015 | チケット0件の場合の進捗率0% | 境界値 | progressRate=0 |
| TC-PS-016 | 進捗率が小数点以下切り捨て | 境界値 | 切り捨て値 |

---

[← 目次に戻る](./README.md)
