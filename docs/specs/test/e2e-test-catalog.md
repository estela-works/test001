# E2E（Playwright）テストカタログ

> **ドキュメント種別**: 最新仕様（継続的にメンテナンス）

## 1. 概要

| 項目 | 内容 |
|------|------|
| テストフレームワーク | Playwright |
| テストランナー | @playwright/test |
| 言語 | TypeScript |
| ディレクトリ | src/test/e2e/ |
| 最終更新日 | 2025-12-23 |

---

## 2. ディレクトリ構造

```
src/test/e2e/
├── fixtures/
│   └── custom-fixtures.ts      # カスタムフィクスチャ定義
├── helpers/
│   └── api-helper.ts           # APIヘルパー（テストデータ作成）
├── master/
│   ├── code-samples/
│   │   └── playwright-functions.md
│   │   └── sample.spec.ts
│   └── test-scenarios/
│       ├── todos-scenarios.md
│       ├── projects-scenarios.md
│       └── users-scenarios.md
├── pages/
│   ├── base.page.ts            # ベースページオブジェクト
│   ├── home.page.ts            # ホーム画面ページオブジェクト
│   ├── todos.page.ts           # ToDo管理画面ページオブジェクト
│   ├── projects.page.ts        # 案件一覧画面ページオブジェクト
│   └── users.page.ts           # ユーザー管理画面ページオブジェクト
├── specs/
│   ├── home/
│   │   └── home.spec.ts        # ホーム画面テスト
│   ├── todos/
│   │   └── todos-crud.spec.ts  # ToDo管理画面テスト
│   ├── projects/
│   │   └── projects-crud.spec.ts # 案件一覧画面テスト
│   └── users/
│       └── users-crud.spec.ts  # ユーザー管理画面テスト
├── playwright.config.ts
├── package.json
└── tsconfig.json
```

---

## 3. テストケース統計

### 3.1 サマリー

| 画面 | 画面表示 | 追加 | 完了/切替 | 削除 | フィルタ | バリデーション | 遷移 | 合計 |
|------|----------|------|-----------|------|----------|----------------|------|------|
| ホーム画面 | 3 | - | - | - | - | - | 4 | 7 |
| ToDo管理画面 | 1 | 2 | 2 | 2 | 2 | 2 | 2 | 13 |
| 案件一覧画面 | 1 | 2 | - | 2 | - | 1 | 3 | 9 |
| ユーザー管理画面 | 1 | 1 | - | 3 | - | 3 | 2 | 10 |
| **合計** | **6** | **5** | **2** | **7** | **2** | **6** | **11** | **39** |

---

## 4. ホーム画面（home.spec.ts）

> **画面ID**: SC-001
> **対象ファイル**: `src/test/e2e/specs/home/home.spec.ts`

### 4.1 画面表示テスト

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| FT-E2E-001 | 初期表示確認 | 正常系 | ヘッダー、3つのナビカード、フッター表示 |
| FT-E2E-002 | ヘッダー表示 | 正常系 | タイトル「Spring Boot App」、サブタイトル「タスク管理アプリケーション」 |
| FT-E2E-003 | ナビゲーションカード表示 | 正常系 | チケット管理、案件管理、ユーザー管理カード表示 |

### 4.2 画面遷移テスト

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| FT-E2E-004 | チケット管理への遷移 | 正常系 | URL=/todos.html |
| FT-E2E-005 | 案件管理への遷移 | 正常系 | URL=/projects.html |
| FT-E2E-006 | ユーザー管理への遷移 | 正常系 | URL=/users.html |
| FT-E2E-007 | ホームへの戻り遷移 | 正常系 | 案件管理からURL=/ |

---

## 5. ToDo管理画面（todos-crud.spec.ts）

> **画面ID**: SC-002
> **対象ファイル**: `src/test/e2e/specs/todos/todos-crud.spec.ts`

### 4.1 画面表示テスト

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-001 | 画面初期表示確認 | 正常系 | 統計表示、フォーム、フィルタボタン表示 |

### 4.2 追加テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-010 | ToDo追加（最小入力） | 正常系 | - | 入力欄クリア、リスト追加、統計更新 |
| TC-011 | ToDo追加（全項目入力） | 正常系 | ユーザー1名以上 | 全項目設定でToDo追加 |

### 4.3 完了切り替えテスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-020 | 完了切り替え（未完了→完了） | 正常系 | ToDoが1件以上 | completed状態、統計更新 |
| TC-021 | 完了切り替え（完了→未完了） | 正常系 | 完了ToDoが1件以上 | pending状態、統計更新 |

### 4.4 削除テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-030 | ToDo削除（確認OK） | 正常系 | ToDoが1件以上 | リストから削除、件数減少 |
| TC-031 | ToDo削除（確認キャンセル） | 正常系 | ToDoが1件以上 | 削除されない、件数変化なし |

### 4.5 フィルタテスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-040 | フィルタ（未完了のみ） | 正常系 | 完了/未完了各1件以上 | 未完了フィルタアクティブ、未完了のみ表示 |
| TC-041 | フィルタ（完了済みのみ） | 正常系 | 完了/未完了各1件以上 | 完了済みフィルタアクティブ |

### 4.6 バリデーションテスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-100 | バリデーション（タイトル未入力） | 異常系 | - | エラーメッセージ表示 |
| TC-101 | バリデーション（日付範囲不正） | 異常系 | - | エラーメッセージ表示 |

### 4.7 案件別表示テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-200 | 案件別ToDo表示 | 正常系 | 案件が1件以上 | 案件名表示、該当ToDoのみ表示 |

### 4.8 画面遷移テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-300 | 画面遷移（案件一覧へ戻る） | 正常系 | - | URL=/projects.html |

---

## 6. 案件一覧画面（projects-crud.spec.ts）

> **画面ID**: SC-003
> **対象ファイル**: `src/test/e2e/specs/projects/projects-crud.spec.ts`

### 5.1 画面表示テスト

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-001 | 画面初期表示確認 | 正常系 | フォーム、案件なしカード、リンク表示 |

### 5.2 追加テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-010 | 案件作成（最小入力） | 正常系 | - | 入力欄クリア、リスト追加、件数増加 |
| TC-011 | 案件作成（全項目入力） | 正常系 | - | 説明付きで案件追加 |

### 5.3 画面遷移テスト（チケット一覧）

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-020 | チケット一覧への遷移 | 正常系 | 案件が1件以上 | URL=/todos.html?projectId={id} |
| TC-021 | 案件なしチケット一覧への遷移 | 正常系 | - | URL=/todos.html?projectId=none |

### 5.4 削除テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-030 | 案件削除（確認OK） | 正常系 | 案件が1件以上 | リストから削除、件数減少 |
| TC-031 | 案件削除（確認キャンセル） | 正常系 | 案件が1件以上 | 削除されない、件数変化なし |

### 5.5 進捗表示テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-040 | 進捗表示の確認 | 正常系 | 案件+チケット2件（1件完了） | total=2, completed=1, progressRate=50 |

### 5.6 バリデーションテスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-100 | バリデーション（案件名未入力） | 異常系 | - | エラーメッセージ表示 |

### 5.7 画面遷移テスト（その他）

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-200 | 画面遷移（ユーザー管理へ） | 正常系 | - | URL=/users.html |
| TC-201 | 画面遷移（ホームへ戻る） | 正常系 | - | URL=/ |

---

## 7. ユーザー管理画面（users-crud.spec.ts）

> **画面ID**: SC-004
> **対象ファイル**: `src/test/e2e/specs/users/users-crud.spec.ts`

### 6.1 画面表示テスト

| ID | テストケース | 分類 | 期待結果 |
|----|-------------|------|----------|
| TC-001 | 画面初期表示確認 | 正常系 | フォーム、統計、リンク表示 |

### 6.2 追加テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-010 | ユーザー追加（正常系） | 正常系 | - | 入力欄クリア、リスト追加、統計更新 |

### 6.3 削除テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-020 | ユーザー削除（確認OK） | 正常系 | ユーザーが1名以上 | リストから削除、件数減少 |
| TC-021 | ユーザー削除（確認キャンセル） | 正常系 | ユーザーが1名以上 | 削除されない、件数変化なし |
| TC-022 | ユーザー削除（担当チケット未割当化） | 正常系 | 担当付きチケットあり | ユーザー削除、チケット未割当 |

### 6.4 バリデーションテスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-100 | バリデーション（ユーザー名未入力） | 異常系 | - | エラーメッセージ表示 |
| TC-101 | バリデーション（重複ユーザー名） | 異常系 | 既存ユーザーあり | エラーメッセージ表示 |
| TC-102 | バリデーション（文字数上限） | 異常系 | - | エラーメッセージ表示 |

### 6.5 空の状態テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-200 | 空の状態表示 | 正常系 | ユーザー0名 | 空メッセージ、統計=0 |

### 6.6 画面遷移テスト

| ID | テストケース | 分類 | 前提条件 | 期待結果 |
|----|-------------|------|----------|----------|
| TC-300 | 画面遷移（案件一覧へ戻る） | 正常系 | - | URL=/projects.html |

---

## 8. テストシナリオ詳細

テストシナリオの詳細は以下のファイルを参照：

| 画面 | シナリオファイル |
|------|------------------|
| ToDo管理画面 | [todos-scenarios.md](../../../src/test/e2e/master/test-scenarios/todos-scenarios.md) |
| 案件一覧画面 | [projects-scenarios.md](../../../src/test/e2e/master/test-scenarios/projects-scenarios.md) |
| ユーザー管理画面 | [users-scenarios.md](../../../src/test/e2e/master/test-scenarios/users-scenarios.md) |

---

## 9. テスト実行方法

```bash
# e2eディレクトリに移動
cd src/test/e2e

# 依存関係インストール
npm install

# ブラウザインストール
npx playwright install

# 全テスト実行
npx playwright test

# 特定のテストファイルを実行
npx playwright test specs/todos/todos-crud.spec.ts
npx playwright test specs/projects/projects-crud.spec.ts
npx playwright test specs/users/users-crud.spec.ts

# UIモードで実行
npx playwright test --ui

# ヘッドありモードで実行（ブラウザ表示）
npx playwright test --headed

# デバッグモード
npx playwright test --debug
```

---

## 10. ページオブジェクト

### 10.1 BasePage

| メソッド | 説明 |
|---------|------|
| goto() | ページに移動 |
| waitForLoadingComplete() | ローディング完了待機 |
| expectUrl(pattern) | URLを検証 |

### 10.2 HomePage

| メソッド | 説明 |
|---------|------|
| goto() | ホーム画面に移動 |
| clickTodoCard() | チケット管理カードをクリック |
| clickProjectCard() | 案件管理カードをクリック |
| clickUserCard() | ユーザー管理カードをクリック |
| getCardTitle(card) | カードのタイトルを取得 |
| getCardDescription(card) | カードの説明を取得 |

### 10.3 TodosPage

| メソッド | 説明 |
|---------|------|
| addTodo(options) | ToDo追加 |
| toggleTodo(index) | 完了状態トグル |
| deleteTodo(index, confirm) | ToDo削除 |
| applyFilter(type) | フィルタ適用 |
| getStats() | 統計取得 |
| expectTodoExists(title) | ToDo存在確認 |
| expectTodoCompleted(index) | 完了状態確認 |
| expectFormCleared() | フォームクリア確認 |
| expectErrorMessage(message) | エラーメッセージ確認 |
| gotoWithProject(projectId) | 案件指定で開く |

### 10.4 ProjectsPage

| メソッド | 説明 |
|---------|------|
| createProject(options) | 案件作成 |
| viewProjectTodos(index) | チケット一覧へ遷移 |
| viewNoProjectTodos() | 案件なしチケット一覧へ遷移 |
| deleteProject(index, confirm) | 案件削除 |
| getProjectCount() | 案件件数取得 |
| getProjectStats(index) | 案件統計取得 |
| expectProjectExists(name) | 案件存在確認 |
| expectFormCleared() | フォームクリア確認 |
| expectErrorMessage(message) | エラーメッセージ確認 |
| navigateToUserManagement() | ユーザー管理へ遷移 |
| navigateToHome() | ホームへ遷移 |

### 10.5 UsersPage

| メソッド | 説明 |
|---------|------|
| addUser(name) | ユーザー追加 |
| deleteUser(index, confirm) | ユーザー削除（インデックス指定） |
| deleteUserByName(name, confirm) | ユーザー削除（名前指定） |
| getUserCount() | ユーザー件数取得 |
| getStatsUserCount() | 統計のユーザー数取得 |
| expectUserExists(name) | ユーザー存在確認 |
| expectUserNotExists(name) | ユーザー非存在確認 |
| expectFormCleared() | フォームクリア確認 |
| expectErrorMessage(message) | エラーメッセージ確認 |
| expectEmptyMessage() | 空メッセージ確認 |
| navigateToProjects() | 案件一覧へ遷移 |

---

## 11. フィクスチャとヘルパー

### 11.1 カスタムフィクスチャ（custom-fixtures.ts）

| フィクスチャ | 説明 |
|-------------|------|
| todosPage | ToDo管理画面ページオブジェクト |
| projectsPage | 案件一覧画面ページオブジェクト |
| usersPage | ユーザー管理画面ページオブジェクト |
| cleanApiHelper | テストデータ作成用APIヘルパー（テスト後自動クリーンアップ） |

### 11.2 APIヘルパー（api-helper.ts）

| メソッド | 説明 |
|---------|------|
| createTodo(options) | ToDo作成 |
| toggleTodo(id) | 完了状態トグル |
| createProject(name) | 案件作成 |
| createUser(name) | ユーザー作成 |
| clearAllData() | 全データクリア |

---

## 更新履歴

| 日付 | 変更内容 |
|------|----------|
| 2025-12-24 | ホーム画面テスト追加（7件） |
| 2025-12-23 | 初版作成（実装済みテストファイルから自動生成） |
