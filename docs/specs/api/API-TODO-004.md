# API-TODO-004: Todo統計取得

> **ドキュメント種別**: 最新仕様（継続的にメンテナンス）

## 1. 基本情報

| 項目 | 内容 |
|------|------|
| API ID | API-TODO-004 |
| メソッド | GET |
| パス | /api/todos/stats |
| 機能 | ToDoの統計情報を取得 |
| 認証 | 不要 |

---

## 2. 利用案件

| 案件 | 日付 | 変更内容 |
|------|------|----------|
| 20251201_初期構築 | 2025-12-01 | 新規作成 |

---

## 3. 参照システム

### 3.1 画面

| 画面ID | 画面名 | 利用イベント | 用途 |
|--------|--------|-------------|------|
| SC-002 | ToDoリスト画面 | EV-002-02 統計更新 | ヘッダー統計表示 |

### 3.2 外部システム

| システム | 用途 |
|---------|------|
| - | 現在なし |

---

## 4. リクエスト

### 4.1 パスパラメータ

なし

### 4.2 クエリパラメータ

なし

### 4.3 リクエストボディ

なし

---

## 5. レスポンス

### 5.1 ステータスコード

| コード | 条件 |
|--------|------|
| 200 | 成功 |

### 5.2 レスポンスボディ

```json
{
  "total": 3,
  "completed": 1,
  "pending": 2
}
```

| フィールド | 型 | 説明 |
|-----------|-----|------|
| total | int | 全ToDo件数 |
| completed | int | 完了件数 |
| pending | int | 未完了件数 |

---

## 6. 処理フロー

```
1. リクエスト受信
   │
2. TodoService.getStats() 呼び出し
   │  ├─ TodoMapper.countAll() → total
   │  └─ TodoMapper.countByCompleted(true) → completed
   │
3. pending = total - completed を計算
   │
4. レスポンス返却（200 + Map）
```

---

## 7. エラー処理

| ケース | HTTPステータス | 対応 |
|--------|---------------|------|
| - | - | エラーケースなし |

---

## 8. 関連項目

| 種別 | ID | 名称 |
|------|-----|------|
| ロジック | TodoService.getStats | 統計計算ロジック |
| Mapper | TodoMapper.countAll | 全件カウント |
| Mapper | TodoMapper.countByCompleted | 条件カウント |
| 画面 | [SC-002](../screens/SC-002/screen.md) | ToDoリスト画面 |
| イベント | [EV-002-02](../screens/SC-002/EV-002-02.md) | 統計更新 |

---

## 更新履歴

| 日付 | 変更内容 | 関連案件 |
|------|----------|----------|
| 2025-12-23 | 初版作成 | - |
