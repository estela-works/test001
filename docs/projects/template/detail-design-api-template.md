# API詳細設計書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | <!-- 案件名を記載 --> |
| 案件ID | <!-- YYYYMM_案件名 --> |
| 作成日 | <!-- YYYY-MM-DD --> |
| 関連基本設計書 | [basic-design-backend.md](./basic-design-backend.md) |
| 関連フロントエンド型定義 | [detail-design-types.md](./detail-design-types.md) |

---

## 1. 概要

### 1.1 本設計書の目的

REST APIエンドポイントの詳細仕様（リクエスト/レスポンス、バリデーション）を定義する。

### 1.2 対象コンポーネント

| レイヤー | コンポーネント | 責務 |
|---------|---------------|------|
| Controller | <!-- クラス名 --> | HTTPリクエストの処理 |

---

## 2. API共通仕様

### 2.1 ベースURL

| 項目 | 値 |
|------|-----|
| 開発環境 | `http://localhost:8080` |
| 本番環境 | <!-- 本番URL --> |

### 2.2 共通ヘッダー

| ヘッダー | 値 | 必須 |
|---------|-----|------|
| Content-Type | application/json | 要 |

### 2.3 共通エラーレスポンス

| ステータス | 説明 |
|-----------|------|
| 400 Bad Request | リクエスト不正 |
| 404 Not Found | リソース未発見 |
| 500 Internal Server Error | サーバーエラー |

---

## 3. エンドポイント詳細

### 3.1 エンドポイント名

| 項目 | 内容 |
|------|------|
| URL | `/api/xxx` |
| メソッド | GET/POST/PUT/PATCH/DELETE |
| 概要 | <!-- 概要 --> |
| 対応機能 | F-001 |

#### リクエスト

**パスパラメータ**:

| パラメータ | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | Long | 要 | リソースID |

**クエリパラメータ**:

| パラメータ | 型 | 必須 | 説明 | デフォルト |
|-----------|-----|------|------|-----------|
| <!-- パラメータ名 --> | <!-- 型 --> | <!-- 要/任意 --> | <!-- 説明 --> | <!-- 値 --> |

**リクエストボディ**:

```json
{
  "field1": "string",
  "field2": 123
}
```

| フィールド | 型 | 必須 | 説明 | バリデーション |
|-----------|-----|------|------|---------------|
| field1 | String | 要 | <!-- 説明 --> | 最大100文字 |
| field2 | Integer | 任意 | <!-- 説明 --> | 0以上 |

※ フロントエンドで使用する型定義はdetail-design-types.mdで定義

#### レスポンス

**成功時 (200/201)**:

```json
{
  "id": 1,
  "field1": "value",
  "field2": 123
}
```

| フィールド | 型 | 説明 |
|-----------|-----|------|
| id | Long | リソースID |
| field1 | String | <!-- 説明 --> |

※ フロントエンドで使用する型定義はdetail-design-types.mdで定義

**エラー時**:

| ステータス | 条件 | レスポンス例 |
|-----------|------|-------------|
| 400 | field1が空 | `{"error": "Title is required"}` |
| 404 | IDが存在しない | `{"error": "Not found"}` |

#### 処理フロー

1. リクエストを受信
2. バリデーションを実行
3. Serviceメソッドを呼び出し
4. レスポンスを返却

---

## 4. Controllerクラス設計

### 4.1 クラス概要

| 項目 | 内容 |
|------|------|
| クラス名 | `com.example.xxx.XxxController` |
| アノテーション | `@RestController`, `@RequestMapping("/api/xxx")` |

### 4.2 依存関係

| フィールド | 型 | 注入方法 |
|-----------|-----|---------|
| service | XxxService | コンストラクタインジェクション |

### 4.3 メソッド一覧

| メソッド | アノテーション | 概要 |
|---------|---------------|------|
| getAll() | @GetMapping | 全件取得 |
| getById(Long id) | @GetMapping("/{id}") | ID指定取得 |
| create(Xxx xxx) | @PostMapping | 新規作成 |

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | YYYY-MM-DD | 初版作成 | <!-- 担当者名 --> |
