# フロントエンド基本設計書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | 担当者機能追加 |
| 案件ID | 202512_担当者機能追加 |
| 作成日 | 2025-12-22 |
| 関連要件整理書 | [requirements.md](./requirements.md) |

---

## 1. 概要

### 1.1 本設計書の目的

担当者機能追加に伴うフロントエンドの画面・UI・操作フローの基本設計を定義する。

### 1.2 フロントエンドの役割

| 責務 | 説明 |
|------|------|
| 画面表示 | ToDoカードへの担当者表示、ユーザー一覧の表示 |
| ユーザー操作 | 担当者選択、ユーザー登録・削除の操作受付 |
| API連携 | ユーザーAPIとの通信、既存ToDo APIへの担当者ID送信 |

---

## 2. 技術要件

### 2.1 使用技術

| 項目 | 技術 |
|------|------|
| マークアップ | HTML5 |
| スタイル | インラインCSS（既存踏襲） |
| スクリプト | Vanilla JavaScript（既存踏襲） |
| API通信 | Fetch API |

---

## 3. 画面要件

### 3.1 画面一覧

| ID | 画面名 | パス | 概要 | 種別 | 対応US |
|----|--------|------|------|------|--------|
| SC-002 | ToDoリスト画面 | /todos.html | 担当者選択・表示機能を追加 | 変更 | US-001, US-002, US-003, US-004 |
| SC-003 | ユーザー管理画面 | /users.html | ユーザーの登録・一覧・削除 | 新規 | US-005, US-006, US-007 |

### 3.2 画面遷移

```
┌─────────────────┐
│   SC-001        │
│   ホーム画面     │
└────────┬────────┘
         │
    ┌────┴────┐
    ▼         ▼
┌─────────┐ ┌─────────┐
│ SC-002  │ │ SC-003  │
│ ToDo    │ │ ユーザー │
│ リスト  │ │ 管理    │
└─────────┘ └─────────┘
```

**遷移パターン**:

| 遷移元 | トリガー | 遷移先 |
|--------|---------|--------|
| SC-001 | ToDoリストリンク | SC-002 |
| SC-001 | ユーザー管理リンク | SC-003（新規追加） |
| SC-002 | ホームリンク | SC-001 |
| SC-003 | ホームリンク | SC-001 |

---

## 4. 画面詳細

### 4.1 SC-002: ToDoリスト画面（変更）

| 項目 | 内容 |
|------|------|
| パス | /todos.html |
| 目的 | ToDo管理のメイン機能（担当者機能追加） |

#### レイアウト（変更後）

```
┌─────────────────────────────────────────────────┐
│                   ToDoリスト                     │  ← ヘッダー
├─────────────────────────────────────────────────┤
│         総数: X   完了: X   未完了: X            │  ← 統計エリア
├─────────────────────────────────────────────────┤
│  新しいToDoを追加                                │
│  [タイトル入力                              ]   │  ← 追加フォーム
│  [説明入力（任意）                          ]   │
│  [担当者 ▼ ]                                   │  ← 【追加】担当者選択
│  [追加]                                        │
├─────────────────────────────────────────────────┤
│       [すべて] [未完了] [完了済み]               │  ← フィルタボタン
├─────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────┐ │
│  │ タイトル                                   │ │
│  │ 説明                                      │ │  ← ToDoカード
│  │ 担当者: 山田太郎                           │ │  ← 【追加】担当者表示
│  │ 作成日: YYYY/MM/DD                        │ │
│  │ [完了にする] [削除]                        │ │
│  └───────────────────────────────────────────┘ │
├─────────────────────────────────────────────────┤
│               ← ホームに戻る                    │  ← フッター
└─────────────────────────────────────────────────┘
```

#### 追加・変更する構成要素

| 要素ID | 要素名 | 種別 | 説明 | 機能 |
|--------|--------|------|------|------|
| E-009 | 担当者選択 | select | 担当者を選択するドロップダウン | ユーザーマスタから選択 |
| E-010 | 担当者表示 | テキスト | カード内の担当者名表示 | 未設定時は「未割当」 |

#### 担当者選択ドロップダウン仕様

| 項目 | 内容 |
|------|------|
| 初期値 | 「選択してください」（value=""） |
| 選択肢 | ユーザーマスタから取得したユーザー一覧 |
| 必須 | 任意（未選択でもToDo作成可能） |

#### 担当者表示仕様

| 状態 | 表示 |
|------|------|
| 担当者あり | 「担当者: {ユーザー名}」 |
| 担当者なし | 「担当者: 未割当」 |

---

### 4.2 SC-003: ユーザー管理画面（新規）

| 項目 | 内容 |
|------|------|
| パス | /users.html |
| 目的 | 担当者として選択可能なユーザーを管理する |

#### レイアウト

```
┌─────────────────────────────────────────────────┐
│                 ユーザー管理                     │  ← ヘッダー
├─────────────────────────────────────────────────┤
│  新しいユーザーを登録                            │
│  [ユーザー名入力                            ]   │  ← 登録フォーム
│  [登録]                                        │
├─────────────────────────────────────────────────┤
│  登録済みユーザー（X件）                         │  ← ユーザー数表示
├─────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────┐ │
│  │ 山田太郎                                   │ │
│  │ 登録日: 2025/12/22                        │ │  ← ユーザーカード
│  │ [削除]                                    │ │
│  └───────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────┐ │
│  │ 鈴木花子                                   │ │
│  │ 登録日: 2025/12/22                        │ │
│  │ [削除]                                    │ │
│  └───────────────────────────────────────────┘ │
├─────────────────────────────────────────────────┤
│               ← ホームに戻る                    │  ← フッター
└─────────────────────────────────────────────────┘
```

#### 構成要素

| 要素ID | 要素名 | 種別 | 説明 | 機能 |
|--------|--------|------|------|------|
| E-001 | ヘッダー | テキスト | 画面タイトル「ユーザー管理」 | - |
| E-002 | ユーザー名入力 | input[text] | 新規ユーザー名入力欄 | 必須入力 |
| E-003 | 登録ボタン | button | ユーザー登録実行 | 新規作成 |
| E-004 | ユーザー数表示 | テキスト | 登録済みユーザー件数 | 自動更新 |
| E-005 | ユーザーカード | カード | ユーザー情報の表示 | 削除可能 |
| E-006 | 削除ボタン | button | ユーザー削除実行 | 確認あり |
| E-007 | フッター | リンク | ホームへのリンク | 画面遷移 |

#### フォーム仕様

| 項目 | 要素ID | 入力タイプ | 必須 | placeholder | 最大文字数 |
|------|--------|-----------|------|-------------|-----------|
| ユーザー名 | E-002 | text | 必須 | 「ユーザー名を入力してください」 | 100文字 |

#### ユーザーカード仕様

| 項目 | 内容 |
|------|------|
| ユーザー名 | ユーザー名を表示 |
| 登録日 | 作成日時を YYYY/MM/DD 形式で表示 |
| 削除ボタン | クリックで確認ダイアログ後に削除 |

---

## 5. イベント一覧

### 5.1 SC-002: ToDoリスト画面（追加イベント）

| イベントID | イベント名 | トリガー | 処理概要 |
|-----------|-----------|---------|---------|
| EV-002-08 | ユーザー一覧取得 | ページロード | ドロップダウン用にユーザー一覧を取得 |
| EV-002-09 | 担当者選択 | ドロップダウン変更 | 選択した担当者IDを保持 |

### 5.2 SC-003: ユーザー管理画面（新規イベント）

| イベントID | イベント名 | トリガー | 処理概要 |
|-----------|-----------|---------|---------|
| EV-003-01 | 初期読込 | ページロード | ユーザー一覧を取得して表示 |
| EV-003-02 | ユーザー登録 | 登録ボタン/Enter | 新規ユーザーを作成 |
| EV-003-03 | ユーザー削除 | 削除ボタン | 確認後にユーザーを削除 |
| EV-003-04 | ホーム遷移 | フッターリンク | ホーム画面へ遷移 |

---

## 6. 共通UI要件

### 6.1 共通コンポーネント

| コンポーネント | 用途 |
|--------------|------|
| エラーメッセージ | API失敗時の表示（既存踏襲） |
| ローディング | API通信中の表示（既存踏襲） |
| 確認ダイアログ | 削除時の確認（既存踏襲） |

### 6.2 UI状態

| 状態 | 表示 |
|------|------|
| ローディング中 | 「読み込み中...」テキスト |
| エラー発生時 | 赤背景のエラーメッセージ（5秒後に自動消去） |
| ユーザーなし | 「登録されているユーザーはありません」 |

---

## 7. API連携

### 7.1 SC-002で使用するAPI

| 操作 | API | メソッド | 変更点 |
|------|-----|---------|-------|
| ToDo作成 | /api/todos | POST | assigneeIdを追加 |
| ToDo更新 | /api/todos/{id} | PUT | assigneeIdを追加 |
| ユーザー一覧取得 | /api/users | GET | 新規追加 |

### 7.2 SC-003で使用するAPI

| 操作 | API | メソッド |
|------|-----|---------|
| ユーザー一覧取得 | /api/users | GET |
| ユーザー登録 | /api/users | POST |
| ユーザー削除 | /api/users/{id} | DELETE |

---

## 8. 非機能要件

### 8.1 ユーザビリティ

| 項目 | 要件 |
|------|------|
| 応答性 | 操作に対して即座に反応（既存踏襲） |
| フィードバック | 登録・削除完了時にリスト更新 |

### 8.2 アクセシビリティ

| 項目 | 対応 |
|------|------|
| キーボード操作 | Enterキーで登録実行 |
| ラベル | 入力欄にplaceholder設定 |

---

## 9. 制約条件

| 項目 | 制約 |
|------|------|
| 対応ブラウザ | Chrome/Firefox/Edge 最新版（既存踏襲） |
| レスポンシブ | 非対応（既存踏襲） |
| ファイル構成 | HTML/CSS/JS一体型（既存踏襲） |

---

## 10. ホーム画面への影響

### SC-001: ホーム画面（変更）

ユーザー管理画面へのリンクを追加する。

```
┌─────────────────────────────────────────────────┐
│              Simple Spring Boot App             │
├─────────────────────────────────────────────────┤
│                                                 │
│     [ToDoリストを開く]                           │
│                                                 │
│     [ユーザー管理を開く]  ← 【追加】              │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2025-12-22 | 初版作成 | - |
