# 要件整理書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | 担当者機能追加 |
| 案件ID | 202512_担当者機能追加 |
| 作成日 | 2025-12-22 |
| 作成者 | - |
| ステータス | 検討中 |

---

## 1. 案件概要

### 1.1 案件の背景

現在のToDoアプリケーションでは、タスクに対して「誰が担当するか」を管理する機能がない。チームでToDoリストを共有する際、各タスクの責任者が不明確になる問題がある。

### 1.2 案件の目的

ToDoアイテムに担当者情報を追加し、タスクの責任の所在を明確化する。これにより、チームでのタスク管理の効率化を図る。

### 1.3 対象ユーザー

| ユーザー | 利用シーン |
|---------|-----------|
| ToDoアプリの利用者 | タスク作成時に担当者を指定したい |
| チームメンバー | 自分が担当するタスクを確認したい |
| 管理者 | ユーザーマスタを管理したい |

---

## 2. 要求一覧

### 2.1 ビジネス要求

| ID | 要求 | 優先度 | 理由 |
|----|------|--------|------|
| BR-001 | ToDoに担当者を設定できる | 必須 | タスクの責任者を明確にするため |
| BR-002 | 担当者を後から変更できる | 必須 | 担当の変更に対応するため |
| BR-003 | 担当者未設定でもToDoを作成できる | 必須 | 担当者が決まっていない段階でもタスクを登録できるようにするため |
| BR-004 | 担当者をマスタから選択できる | 必須 | 表記ゆれを防ぎ、一貫した担当者管理を行うため |
| BR-005 | ユーザーマスタを管理できる | 必須 | 選択肢となるユーザーを事前登録するため |

### 2.2 ユーザー要求（ユーザーストーリー）

| ID | ユーザーストーリー | 対応BR | 優先度 |
|----|-------------------|--------|--------|
| US-001 | ToDoアプリ利用者として、新規ToDo作成時に登録済みユーザーから担当者を選択したい。なぜなら表記ゆれなくタスクの担当を明確にしたいから。 | BR-001, BR-004 | 高 |
| US-002 | ToDoアプリ利用者として、既存ToDoの担当者を変更したい。なぜなら担当者が変わることがあるから。 | BR-002 | 高 |
| US-003 | ToDoアプリ利用者として、担当者を選択せずにToDoを作成したい。なぜなら担当者が決まっていない場合もあるから。 | BR-003 | 高 |
| US-004 | ToDoアプリ利用者として、ToDoカード上で担当者を確認したい。なぜなら誰の担当かすぐに分かるようにしたいから。 | BR-001 | 高 |
| US-005 | 管理者として、ユーザーを新規登録したい。なぜなら担当者の選択肢を増やしたいから。 | BR-005 | 高 |
| US-006 | 管理者として、ユーザー一覧を確認したい。なぜなら登録済みユーザーを把握したいから。 | BR-005 | 高 |
| US-007 | 管理者として、ユーザーを削除したい。なぜなら不要なユーザーを整理したいから。 | BR-005 | 中 |

---

## 3. スコープ定義

### 3.1 スコープ内（In Scope）

| カテゴリ | 項目 | 説明 |
|---------|------|------|
| 機能 | 担当者の選択 | ToDo作成・編集時にマスタから担当者を選択できる |
| 機能 | 担当者の表示 | ToDoカードに担当者名を表示する（未設定時は「未割当」） |
| 機能 | 担当者の更新 | 既存ToDoの担当者を変更できる |
| 機能 | ユーザー登録 | ユーザーマスタに新規ユーザーを登録できる |
| 機能 | ユーザー一覧 | 登録済みユーザーの一覧を表示できる |
| 機能 | ユーザー削除 | ユーザーをマスタから削除できる |
| 画面 | ToDoリスト画面の変更 | 担当者選択ドロップダウンの追加、カードへの担当者表示追加 |
| 画面 | ユーザー管理画面の新規作成 | ユーザーの登録・一覧・削除ができる管理画面 |
| DB | TODOテーブルの変更 | 担当者ID（ASSIGNEE_ID）カラムの追加 |
| DB | USERテーブルの新規作成 | ユーザーマスタテーブルの追加 |
| API | 既存ToDo APIの拡張 | 担当者IDフィールドの追加 |
| API | ユーザー管理APIの新規作成 | ユーザーCRUD用API |

### 3.2 スコープ外（Out of Scope）

| 項目 | 見送り理由 | 将来検討 |
|------|-----------|---------|
| ユーザー認証・ログイン | 認証基盤は別案件で検討 | 可 |
| 担当者でのフィルタリング | 今回は担当者の登録・表示のみ対応、フィルタ機能は次案件で検討 | 可 |
| 担当者への通知機能 | 認証・通知基盤が未整備のため | 可 |
| 複数担当者の設定 | 複雑性を避けるため、1ToDo = 1担当者とする | 可 |
| ユーザー情報の編集 | シンプルにするため、編集は削除→再登録で対応 | 可 |

---

## 4. 機能要件

### 4.1 機能一覧

| ID | 機能名 | 概要 | 対応US | 優先度 |
|----|--------|------|--------|--------|
| F-001 | 担当者選択 | ToDo作成・編集時にユーザーマスタから担当者を選択できる | US-001, US-002, US-003 | 必須 |
| F-002 | 担当者表示 | ToDoカードに担当者を表示する（未設定時は「未割当」） | US-004 | 必須 |
| F-003 | ユーザー登録 | ユーザーマスタに新規ユーザーを登録できる | US-005 | 必須 |
| F-004 | ユーザー一覧表示 | 登録済みユーザーの一覧を表示できる | US-006 | 必須 |
| F-005 | ユーザー削除 | ユーザーをマスタから削除できる | US-007 | 必須 |

### 4.2 画面一覧

| ID | 画面名 | パス | 概要 | 種別 |
|----|--------|------|------|------|
| SC-002 | ToDoリスト画面 | /todos.html | 既存画面の変更（担当者選択・表示追加） | 変更 |
| SC-003 | ユーザー管理画面 | /users.html | ユーザーの登録・一覧・削除ができる管理画面 | 新規 |

### 4.3 データ要件

#### USERテーブル（新規）

| カラム名 | データ型 | NULL | 説明 |
|---------|----------|------|------|
| ID | BIGINT | NO | 主キー（自動採番） |
| NAME | VARCHAR(100) | NO | ユーザー名（必須、一意） |
| CREATED_AT | TIMESTAMP | NO | 作成日時 |

#### TODOテーブル（変更）

| カラム名 | データ型 | NULL | 説明 |
|---------|----------|------|------|
| ASSIGNEE_ID | BIGINT | YES | 担当者ID（USERテーブルへの外部キー） |

---

## 5. 非機能要件

### 5.1 性能要件

| 項目 | 要件 | 測定方法 |
|------|------|---------|
| レスポンス時間 | 既存と同等（変化なし） | 手動確認 |

### 5.2 可用性要件

| 項目 | 要件 |
|------|------|
| 可用性 | 既存と同等 |

### 5.3 セキュリティ要件

| 項目 | 対応 |
|------|------|
| 入力値検証 | ユーザー名のXSS対策（HTMLエスケープ） |
| 文字数制限 | ユーザー名は最大100文字 |

### 5.4 保守性要件

| 項目 | 要件 |
|------|------|
| 既存コードへの影響 | 最小限に抑える |

---

## 6. 制約条件

### 6.1 技術制約

| 項目 | 制約 |
|------|------|
| データベース | 既存のH2 Databaseを使用 |
| フレームワーク | 既存のSpring Boot + MyBatisを使用 |
| フロントエンド | 既存のVanilla JavaScript構成を維持 |

### 6.2 環境制約

| 項目 | 制約 |
|------|------|
| 動作環境 | 既存と同じ |

### 6.3 その他の制約

| 項目 | 制約 |
|------|------|
| 担当者入力形式 | マスタからの選択式（ドロップダウン） |
| 担当者数 | 1ToDo につき 1人まで |
| ユーザー名 | 一意制約あり（重複不可） |

---

## 7. 前提条件

| 項目 | 前提 |
|------|------|
| 既存機能 | 既存のToDo CRUD機能が正常に動作している |
| データ移行 | 既存ToDoデータの担当者IDは NULL（未割当）として扱う |

---

## 8. 受入条件

### 8.1 機能面

| ID | 条件 | 確認方法 |
|----|------|---------|
| AC-001 | ユーザーを新規登録できる | 画面操作で確認 |
| AC-002 | 登録済みユーザーの一覧が表示される | 画面表示を確認 |
| AC-003 | ユーザーを削除できる | 画面操作で確認 |
| AC-004 | ToDo新規作成時に担当者をドロップダウンから選択できる | 画面操作で確認 |
| AC-005 | 担当者を選択せずにToDoを作成できる | 画面操作で確認 |
| AC-006 | ToDoカードに担当者名が表示される | 画面表示を確認 |
| AC-007 | 担当者未設定のToDoには「未割当」と表示される | 画面表示を確認 |
| AC-008 | 既存ToDoの担当者を変更できる | 画面操作で確認 |
| AC-009 | 既存ToDoが正常に動作する（後方互換性） | 既存機能のテスト |

### 8.2 非機能面

| ID | 条件 | 確認方法 |
|----|------|---------|
| AC-010 | 既存データが破損しない | DBデータ確認 |
| AC-011 | 100文字を超えるユーザー名が登録できない | 入力テスト |
| AC-012 | 重複するユーザー名が登録できない | 入力テスト |

---

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| 担当者（Assignee） | ToDoタスクの責任者。ユーザーマスタに登録されたユーザーから選択する。 |
| ユーザー（User） | ユーザーマスタに登録された人物。担当者として割り当て可能。 |
| 未割当 | ToDoに担当者が設定されていない状態。 |

---

## 10. 関連ドキュメント

| ドキュメント | 説明 |
|-------------|------|
| [basic-design-frontend.md](./basic-design-frontend.md) | フロントエンド基本設計書 |
| [basic-design-backend.md](./basic-design-backend.md) | バックエンド基本設計書 |
| [detail-design-db.md](./detail-design-db.md) | DB詳細設計書 |
| [test-spec.md](./test-spec.md) | テスト仕様書 |

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2025-12-22 | 初版作成 | - |
| 1.1 | 2025-12-22 | 担当者入力をマスタ選択式に変更、ユーザー管理機能を追加 | - |
