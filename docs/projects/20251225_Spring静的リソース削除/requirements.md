# 要件整理書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | Spring Boot静的リソース削除とVueフロントエンドへのリダイレクト実装 |
| 案件ID | 20251225_Spring静的リソース削除 |
| 作成日 | 2025-12-25 |
| 作成者 | Claude |
| ステータス | 検討中 |

---

## 1. 案件概要

### 1.1 案件の背景

現在、Vue.js移行が完了し、フロントエンドは `src/frontend/` に独立して配置されている。しかし、Spring Boot側の `src/backend/main/resources/static/` ディレクトリにはVueのビルド成果物(index.html, assets/)が配置されており、以下の問題が発生している:

- フロントエンドの実体がどこにあるのか不明瞭
- Spring BootアプリとVueアプリが混在し、管理が煩雑
- 開発者が誤ってSpring側の静的ファイルを編集するリスク
- 本来の開発対象はVue側(`npm run dev`で起動するlocalhost:5173)なのに、Spring側(localhost:8080)がメインに見える

### 1.2 案件の目的

1. **明確な責務分離**: Spring Bootはバックエンド(REST API)のみに専念させる
2. **開発体験の改善**: 開発時はVueのDev Server(localhost:5173)を利用することを明示
3. **誤操作の防止**: Spring側の静的ファイルを削除し、編集対象を明確にする
4. **適切な誘導**: Spring Boot起動時(localhost:8080)にアクセスした場合、Vueフロントエンドへリダイレクトまたは案内する

### 1.3 対象ユーザー

| ユーザー | 利用シーン |
|---------|-----------|
| 開発者 | フロントエンド開発時にどのURLにアクセスすべきか理解する |
| 開発者 | Spring Bootはバックエンド専用であることを理解する |
| エンドユーザー | 本番環境では引き続きVueアプリを利用する(本案件では影響なし) |

---

## 2. 要求一覧

### 2.1 ビジネス要求

| ID | 要求 | 優先度 | 理由 |
|----|------|--------|------|
| BR-001 | Spring Boot側の静的リソースを削除する | 必須 | フロントエンドの実体はVue側のみであることを明確にするため |
| BR-002 | Spring Bootルート(/)にアクセス時、Vueフロントエンドへの案内を表示する | 必須 | 開発者が正しいURLにアクセスできるようにするため |
| BR-003 | バックエンドAPI(/api/*)は引き続き正常に動作させる | 必須 | Vueアプリからのリクエストを処理するため |

### 2.2 ユーザー要求(ユーザーストーリー)

| ID | ユーザーストーリー | 対応BR | 優先度 |
|----|-------------------|--------|--------|
| US-001 | 開発者として、Spring Boot側にフロントエンドファイルがないことを理解したい。なぜなら誤編集を防ぐため。 | BR-001 | 高 |
| US-002 | 開発者として、http://localhost:8080 にアクセスした際、Vueフロントエンド(http://localhost:5173)へのリンクを表示してほしい。なぜなら正しい開発環境にすぐアクセスできるから。 | BR-002 | 高 |
| US-003 | 開発者として、APIエンドポイント(/api/*)は引き続き使いたい。なぜならVueアプリから呼び出す必要があるから。 | BR-003 | 高 |

---

## 3. スコープ定義

### 3.1 スコープ内(In Scope)

| カテゴリ | 項目 | 説明 |
|---------|------|------|
| 削除 | src/backend/main/resources/static/ 配下の全ファイル | index.html, assets/, vite.svgなど |
| 新規実装 | ルートパス(/)へのアクセス時の案内ページ | Vueフロントエンドへのリンク表示 |
| 確認 | REST API(/api/*)の動作確認 | 既存APIが正常に動作することを確認 |
| ドキュメント | READMEの更新 | アクセスURLの説明を修正 |

### 3.2 スコープ外(Out of Scope)

| 項目 | 見送り理由 | 将来検討 |
|------|-----------|---------|
| 本番環境のデプロイ構成変更 | 本案件は開発環境の改善が目的 | 可 |
| Vueフロントエンドのビルド成果物配置方法の変更 | 現状のまま(別途配置) | 可 |
| Spring SecurityによるAPI保護 | 既存機能を維持 | 可 |

---

## 4. 機能要件

### 4.1 機能一覧

| ID | 機能名 | 概要 | 対応US | 優先度 |
|----|--------|------|--------|--------|
| F-001 | 静的リソース削除 | src/backend/main/resources/static/ を空にする | US-001 | 必須 |
| F-002 | ルートパス案内ページ表示 | `/` にアクセス時、Vueフロントエンドへのリンクを表示 | US-002 | 必須 |
| F-003 | REST API維持 | `/api/*` は既存通り動作 | US-003 | 必須 |

### 4.2 画面一覧

| ID | 画面名 | パス | 概要 |
|----|--------|------|------|
| SC-001 | フロントエンド案内ページ | http://localhost:8080/ | 「Vue開発サーバーは http://localhost:5173 です」と表示 |

---

## 5. 非機能要件

### 5.1 性能要件

| 項目 | 要件 | 測定方法 |
|------|------|---------|
| 案内ページ応答速度 | 100ms以内 | ブラウザDevToolsで確認 |

### 5.2 可用性要件

| 項目 | 要件 |
|------|------|
| 対応ブラウザ | Chrome, Firefox, Edge(最新版) |

### 5.3 セキュリティ要件

| 項目 | 対応 |
|------|------|
| XSS対策 | 既存通りSpring Bootのデフォルト設定を利用 |

### 5.4 保守性要件

| 項目 | 要件 |
|------|------|
| ドキュメント整合性 | READMEのアクセスURL説明を最新化 |
| コードの明確性 | 案内ページ用のシンプルなControllerを追加 |

---

## 6. 制約条件

### 6.1 技術制約

| 項目 | 制約 |
|------|------|
| バックエンド | Spring Boot 3.2, Java 17(既存維持) |
| 既存API | REST API仕様は変更しない |

### 6.2 環境制約

| 項目 | 制約 |
|------|------|
| 開発環境 | Spring Boot(8080), Vue Dev Server(5173)の2プロセス起動 |

### 6.3 その他の制約

| 項目 | 制約 |
|------|------|
| 既存機能 | Vue側のフロントエンド機能は一切変更しない |

---

## 7. 前提条件

| 項目 | 前提 |
|------|------|
| Vue移行完了 | src/frontend/ に全機能が実装済み |
| Vue Dev Server | `npm run dev` で起動可能 |
| Spring Boot API | `/api/*` が正常に動作している |

---

## 8. 受入条件

### 8.1 機能面

| 条件 | 確認方法 |
|------|---------|
| src/backend/main/resources/static/ が空である | ディレクトリを目視確認 |
| http://localhost:8080/ にアクセスすると案内ページが表示される | ブラウザで確認 |
| 案内ページにVueフロントエンドへのリンク(http://localhost:5173)が表示される | ブラウザで確認 |
| REST API(/api/todos など)が正常にレスポンスを返す | curlまたはブラウザDevToolsで確認 |

### 8.2 非機能面

| 条件 | 確認方法 |
|------|---------|
| READMEが最新のアクセス方法を説明している | README.md を確認 |
| ビルドエラーがない | `./mvnw.cmd clean compile` 成功 |

---

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| 静的リソース | Spring Bootの resources/static/ 配下に配置されるHTML, CSS, JSファイル |
| Vue Dev Server | Viteによる開発用サーバー(ホットリロード対応) |
| 案内ページ | Spring Boot起動時にVueフロントエンドへ誘導するためのシンプルなHTMLページ |

---

## 10. 実装方針

### 10.1 削除対象ファイル

```
src/backend/main/resources/static/
├── index.html         # 削除
├── vite.svg           # 削除
└── assets/            # ディレクトリごと削除
```

### 10.2 新規実装内容

**案内ページの実装方法(案)**

#### オプションA: Controllerで直接HTML文字列を返す(推奨)

- シンプルで軽量
- 追加ファイル不要
- `/` へのGETリクエストに対してHTMLを返すControllerを作成

#### オプションB: Thymeleafテンプレートを使用

- テンプレートファイルが必要
- より柔軟なデザイン対応可能

**推奨**: オプションA(シンプルなController)

---

## 11. 関連ドキュメント

| ドキュメント | 説明 |
|-------------|------|
| [docs/projects/20241224_vue-migration/requirements.md](../20241224_vue-migration/requirements.md) | Vue移行案件の要件定義書 |
| [README.md](../../../README.md) | プロジェクトREADME(本案件で更新対象) |

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2025-12-25 | 初版作成 | Claude |
