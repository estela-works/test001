# フロントエンド基本設計書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | Spring Boot静的リソース削除とVueフロントエンドへのリダイレクト実装 |
| 案件ID | 20251225_Spring静的リソース削除 |
| 作成日 | 2025-12-25 |
| 関連要件整理書 | [requirements.md](./requirements.md) |

---

## 1. 概要

### 1.1 本設計書の目的

本案件におけるフロントエンドの変更範囲を明確にする。

### 1.2 本案件でのフロントエンドの役割

| 責務 | 説明 |
|------|------|
| **変更なし** | 本案件ではフロントエンド側の変更は一切行わない |

---

## 2. 変更がない理由

### 2.1 本案件の目的

本案件は以下を目的としている:

1. **Spring Boot側の静的リソース削除** - `src/backend/main/resources/static/` を空にする
2. **バックエンド専用化の明示** - ルートパス(`/`)にアクセス時、Vue開発サーバーへの案内を表示

### 2.2 フロントエンド変更が不要な理由

| 理由 | 説明 |
|------|------|
| フロントエンドは既に独立している | Vue.jsプロジェクトは `src/frontend/` に配置済み |
| 実行環境が分離されている | Vue Dev Server(localhost:5173)とSpring Boot(localhost:8080)は別プロセス |
| 既存機能を維持 | 画面、コンポーネント、API通信すべて変更不要 |
| ビルド成果物の配置のみ変更 | Spring側のstatic削除はデプロイの話であり、開発コードには影響なし |

### 2.3 影響範囲の明確化

```
┌─────────────────────────────────────────────────┐
│  本案件の変更範囲                                │
│                                                 │
│  [Spring Boot側]                                │
│  - src/backend/main/resources/static/ 削除      │
│  - FrontendRedirectController 追加              │
│                                                 │
│  [Vue側]                                        │
│  - 変更なし                                     │
└─────────────────────────────────────────────────┘
```

---

## 3. 現在のフロントエンド構成(参考)

### 3.1 使用技術

| 項目 | 技術 |
|------|------|
| フレームワーク | Vue.js 3 (Composition API) |
| 言語 | TypeScript |
| 状態管理 | Pinia |
| ルーティング | Vue Router 4 |
| ビルドツール | Vite |
| API通信 | Fetch API |
| スタイル | CSS3 (Scoped Styles) |

**本案件での変更**: なし

### 3.2 コンポーネント構成

```
src/frontend/src/
├── views/               # 画面コンポーネント
│   ├── HomeView.vue    # トップページ
│   ├── TodoView.vue    # チケット管理
│   ├── ProjectView.vue # 案件管理
│   └── UserView.vue    # ユーザー管理
├── components/          # 共通コンポーネント
│   ├── common/
│   ├── todo/
│   ├── project/
│   └── user/
├── stores/              # Piniaストア
├── services/            # API通信
├── types/               # TypeScript型定義
└── router/              # Vue Router設定
```

**本案件での変更**: なし

---

## 4. 画面要件

### 4.1 画面一覧

| ID | 画面名 | パス | 概要 | 本案件での変更 |
|----|--------|------|------|---------------|
| SC-001 | トップページ | / | アプリのエントリーポイント | **変更なし** |
| SC-002 | チケット管理 | /todos | チケット一覧・詳細・作成 | **変更なし** |
| SC-003 | 案件管理 | /projects | 案件一覧・詳細・作成 | **変更なし** |
| SC-004 | ユーザー管理 | /users | ユーザー一覧・作成・削除 | **変更なし** |

### 4.2 画面遷移

```
┌─────────────┐
│ HomeView    │ (/)
│ トップ       │
└──────┬──────┘
       │
       ├─────→ TodoView (/todos)
       ├─────→ ProjectView (/projects)
       └─────→ UserView (/users)
```

**本案件での変更**: なし

---

## 5. API連携

### 5.1 使用するバックエンドAPI

| API | 本案件での影響 |
|-----|---------------|
| GET /api/todos | 変更なし・正常動作 |
| POST /api/todos | 変更なし・正常動作 |
| GET /api/projects | 変更なし・正常動作 |
| GET /api/users | 変更なし・正常動作 |
| その他すべてのAPI | 変更なし・正常動作 |

### 5.2 API呼び出し先の変更

**変更前**:
- 開発時: `http://localhost:5173` (Vue Dev Server) → `http://localhost:8080/api/*` (Spring Boot)
- ビルド成果物: Spring Bootに配置 → 同一オリジン

**変更後**:
- 開発時: `http://localhost:5173` (Vue Dev Server) → `http://localhost:8080/api/*` (Spring Boot)
- ビルド成果物: 配置先未定(本案件ではスコープ外)

**実装上の変更**: なし(既にVue Dev Serverから`localhost:8080/api/*`を呼び出している)

---

## 6. 開発・ビルド環境

### 6.1 開発環境

**変更前**:
```bash
cd src/frontend
npm run dev
# → http://localhost:5173 で起動
```

**変更後**:
```bash
cd src/frontend
npm run dev
# → http://localhost:5173 で起動(変更なし)
```

### 6.2 ビルド

**変更前**:
```bash
cd src/frontend
npm run build
# → dist/ にビルド成果物生成
# → Spring Bootのstatic/にコピー
```

**変更後**:
```bash
cd src/frontend
npm run build
# → dist/ にビルド成果物生成(変更なし)
# → Spring Bootへのコピーは行わない(新方針)
```

**注意**: ビルド成果物の配置先は本案件のスコープ外。将来的には別途検討。

---

## 7. 非機能要件

### 7.1 性能

| 項目 | 要件 | 本案件での変更 |
|------|------|---------------|
| 初回読み込み | 3秒以内 | 変更なし |
| ページ遷移 | 即座に応答 | 変更なし |

### 7.2 対応ブラウザ

| 項目 | 対応 | 本案件での変更 |
|------|------|---------------|
| Chrome | 最新版 | 変更なし |
| Firefox | 最新版 | 変更なし |
| Edge | 最新版 | 変更なし |

---

## 8. テスト観点

### 8.1 動作確認

本案件では**フロントエンドコードに変更がない**ため、以下を確認すればよい:

| テスト項目 | 確認内容 | 期待結果 |
|-----------|---------|---------|
| Vue Dev Server起動 | `npm run dev` が正常に起動する | localhost:5173でアプリ起動 |
| API通信 | バックエンドAPIが正常に呼び出せる | データ取得・更新が成功 |
| 既存機能 | すべての画面・機能が正常動作する | 既存通り動作 |

### 8.2 リグレッションテスト

| テスト種別 | 実施方法 | 本案件での要否 |
|-----------|---------|---------------|
| 単体テスト(Vitest) | `npm run test` | 任意(コード変更なしのため) |
| E2Eテスト(Playwright) | 既存テストスイート実行 | 推奨(バックエンド変更の影響確認) |

---

## 9. 制約条件

| 項目 | 制約 | 本案件での変更 |
|------|------|---------------|
| Node.js | 18.x以上 | 変更なし |
| パッケージマネージャ | npm | 変更なし |
| フレームワーク | Vue.js 3 | 変更なし |

---

## 10. 開発者への注意事項

### 10.1 開発時のアクセス先

**重要**: 今後は以下のURLを使い分けること

| 用途 | URL | 説明 |
|------|-----|------|
| フロントエンド開発 | http://localhost:5173 | Vue Dev Server(ホットリロード) |
| バックエンドAPI確認 | http://localhost:8080/api/* | REST APIエンドポイント |
| ~~Spring Bootのstatic~~ | ~~http://localhost:8080~~ | **削除されたため使用不可** |

### 10.2 本案件による変化

| 変更前 | 変更後 |
|-------|-------|
| Spring BootのルートにVueアプリ配置 | Spring Bootは案内ページのみ表示 |
| localhost:8080でVueアプリにアクセス可能 | localhost:5173でVueアプリにアクセス |
| 開発とビルド成果物が混在 | 開発環境が明確化 |

---

## 11. 将来の検討事項(本案件ではスコープ外)

| 項目 | 説明 | ステータス |
|------|------|-----------|
| ビルド成果物の配置先 | 本番環境でのVueアプリ配信方法 | 未定 |
| Nginx等の導入 | フロントエンドとバックエンドを統合配信 | 未定 |
| Docker化 | コンテナ化による環境統一 | 未定 |

---

## 12. まとめ

### 12.1 本案件でのフロントエンド作業

**作業内容**: **なし**

**理由**:
- フロントエンドコードは一切変更しない
- 開発環境(Vue Dev Server)は既に分離済み
- 既存機能はすべてそのまま動作

### 12.2 確認事項

本案件完了後、以下を確認:

- [ ] `npm run dev` が正常に起動する
- [ ] localhost:5173でVueアプリにアクセスできる
- [ ] バックエンドAPI(`/api/*`)が正常に呼び出せる
- [ ] 既存のすべての画面・機能が動作する

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2025-12-25 | 初版作成(フロントエンド変更なしを明記) | Claude |
