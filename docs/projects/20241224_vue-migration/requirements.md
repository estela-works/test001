# 要件整理書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | Vue.js移行・フロントエンド/バックエンド分離 |
| 案件ID | 20241224_vue-migration |
| 作成日 | 2024-12-24 |
| 作成者 | - |
| ステータス | 検討中 |

---

## 1. 案件概要

### 1.1 案件の背景

現在のフロントエンドはバニラJavaScript + HTML（静的ファイル）で構築されており、以下の課題がある:

- コンポーネント再利用性が低い
- 状態管理が画面ごとに分散している
- テストが困難（DOM操作と業務ロジックが混在）
- 大規模化に伴う保守性の低下リスク

また、ソースコードがSpring Bootのresources/static配下に混在しており、フロントエンドとバックエンドの責務が曖昧である。

### 1.2 案件の目的

1. **フロントエンドの近代化**: Vue.js 3を導入し、コンポーネントベースのアーキテクチャへ移行
2. **関心の分離**: フロントエンドとバックエンドのソースコードを分離管理
3. **開発効率向上**: ホットリロード、TypeScript対応など開発体験を改善
4. **テスト容易性向上**: コンポーネント単体テストを可能にする

### 1.3 対象ユーザー

| ユーザー | 利用シーン |
|---------|-----------|
| 開発者 | フロントエンド開発・保守 |
| エンドユーザー | ToDo管理、案件管理、担当者管理（既存機能の継続利用） |

---

## 2. 要求一覧

### 2.1 ビジネス要求

| ID | 要求 | 優先度 | 理由 |
|----|------|--------|------|
| BR-001 | フロントエンドをVue.jsへ移行する | 必須 | 保守性・拡張性向上のため |
| BR-002 | ソースコードをフロントエンド/バックエンドで分離する | 必須 | 責務分離と独立開発を可能にするため |
| BR-003 | 既存機能はすべて動作を維持する | 必須 | 業務継続のため |
| BR-004 | 開発効率を向上させる | 希望 | ホットリロード等によるイテレーション高速化 |

### 2.2 ユーザー要求（ユーザーストーリー）

| ID | ユーザーストーリー | 対応BR | 優先度 |
|----|-------------------|--------|--------|
| US-001 | 開発者として、フロントエンドコードを独立して開発したい。なぜなら効率的に開発できるから。 | BR-002 | 高 |
| US-002 | 開発者として、コンポーネントを再利用したい。なぜなら重複コードを減らせるから。 | BR-001 | 高 |
| US-003 | 開発者として、フロントエンドの単体テストを書きたい。なぜなら品質を担保できるから。 | BR-001 | 中 |
| US-004 | エンドユーザーとして、従来通りToDoを管理したい。なぜなら業務に支障をきたさないから。 | BR-003 | 高 |

---

## 3. スコープ定義

### 3.1 スコープ内（In Scope）

| カテゴリ | 項目 | 説明 |
|---------|------|------|
| 技術 | Vue.js 3 (Composition API) 導入 | フロントエンドフレームワーク |
| 技術 | Pinia導入 | 状態管理ライブラリ |
| 技術 | Vite導入 | ビルドツール |
| 技術 | TypeScript導入 | 型安全性の確保 |
| 構造 | src/frontend ディレクトリ作成 | フロントエンドソース配置場所 |
| 構造 | src/backend ディレクトリ作成 | バックエンドソース配置場所（既存Javaコード移動） |
| 画面 | トップページ (index.html) | Vue移行 |
| 画面 | ToDo管理 (todos.html) | Vue移行 |
| 画面 | 案件管理 (projects.html) | Vue移行 |
| 画面 | 担当者管理 (users.html) | Vue移行 |
| テスト | Vitest導入 | フロントエンド単体テスト |

### 3.2 スコープ外（Out of Scope）

| 項目 | 見送り理由 | 将来検討 |
|------|-----------|---------|
| UIデザイン刷新 | 機能移行を優先するため | 可 |
| 認証機能追加 | 本案件のスコープ外 | 可 |
| バックエンドAPI変更 | 既存APIを維持する | 可 |
| E2Eテストの移行 | 既存Playwrightテストをそのまま使用 | 可 |

---

## 4. 機能要件

### 4.1 機能一覧

| ID | 機能名 | 概要 | 対応US | 優先度 |
|----|--------|------|--------|--------|
| F-001 | ToDo一覧表示 | ToDoリストを取得し表示する | US-004 | 必須 |
| F-002 | ToDo追加 | 新規ToDoを作成する | US-004 | 必須 |
| F-003 | ToDo編集（完了/未完了切替） | ToDoの状態を更新する | US-004 | 必須 |
| F-004 | ToDo削除 | ToDoを削除する | US-004 | 必須 |
| F-005 | ToDoフィルタリング | すべて/未完了/完了済みで絞り込む | US-004 | 必須 |
| F-006 | 案件一覧表示 | 案件リストを取得し表示する | US-004 | 必須 |
| F-007 | 案件追加/編集/削除 | 案件のCRUD操作 | US-004 | 必須 |
| F-008 | 担当者一覧表示 | 担当者リストを取得し表示する | US-004 | 必須 |
| F-009 | 担当者追加/編集/削除 | 担当者のCRUD操作 | US-004 | 必須 |
| F-010 | 統計表示 | ToDo件数（総数/完了/未完了）を表示 | US-004 | 必須 |

### 4.2 画面一覧

| ID | 画面名 | パス | 概要 |
|----|--------|------|------|
| SC-001 | トップページ | / | アプリのエントリーポイント、各機能へのナビゲーション |
| SC-002 | ToDo管理画面 | /todos | ToDo一覧・追加・編集・削除 |
| SC-003 | 案件管理画面 | /projects | 案件一覧・追加・編集・削除 |
| SC-004 | 担当者管理画面 | /users | 担当者一覧・追加・編集・削除 |

---

## 5. 非機能要件

### 5.1 性能要件

| 項目 | 要件 | 測定方法 |
|------|------|---------|
| 初回読み込み | 3秒以内（開発環境） | ブラウザDevToolsで計測 |
| ビルド時間 | 30秒以内 | Viteビルド時間 |

### 5.2 可用性要件

| 項目 | 要件 |
|------|------|
| 対応ブラウザ | Chrome, Firefox, Edge（最新版） |

### 5.3 セキュリティ要件

| 項目 | 対応 |
|------|------|
| XSS対策 | Vueのテンプレート自動エスケープを利用 |
| CSRF対策 | 既存Spring Boot設定を維持 |

### 5.4 保守性要件

| 項目 | 要件 |
|------|------|
| コーディング規約 | ESLint + Prettierで統一 |
| 型安全性 | TypeScript strict modeを有効化 |
| コンポーネント設計 | 単一責任の原則に従う |

---

## 6. 制約条件

### 6.1 技術制約

| 項目 | 制約 |
|------|------|
| フレームワーク | Vue.js 3（Composition API） |
| 状態管理 | Pinia |
| ビルドツール | Vite |
| 言語 | TypeScript |
| バックエンドAPI | 既存REST APIを変更しない |

### 6.2 環境制約

| 項目 | 制約 |
|------|------|
| Node.js | 18.x以上 |
| パッケージマネージャ | npm |

### 6.3 その他の制約

| 項目 | 制約 |
|------|------|
| 開発中のダウンタイム | 既存環境は維持しつつ並行開発 |

---

## 7. 前提条件

| 項目 | 前提 |
|------|------|
| 既存API | 正常に動作している |
| 開発環境 | Node.js 18以上がインストール済み |
| 既存テスト | E2Eテストでリグレッション確認可能 |

---

## 8. 受入条件

### 8.1 機能面

| 条件 | 確認方法 |
|------|---------|
| 全既存機能がVue版で動作する | 手動テスト + E2Eテスト |
| API呼び出しが正常に行われる | ブラウザDevToolsでネットワーク確認 |
| コンポーネント単体テストがパスする | Vitestテスト実行 |

### 8.2 非機能面

| 条件 | 確認方法 |
|------|---------|
| TypeScriptビルドエラーがない | `npm run build` 成功 |
| ESLintエラーがない | `npm run lint` 成功 |

---

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| SFC | Single File Component - Vueの.vueファイル形式 |
| Composition API | Vue 3の関数ベースのコンポーネント定義方式 |
| Pinia | Vue公式推奨の状態管理ライブラリ |
| Vite | 次世代フロントエンドビルドツール |

---

## 10. 新ディレクトリ構成

```
test001/
├── src/
│   ├── frontend/                    # 【新規】フロントエンド
│   │   ├── src/
│   │   │   ├── components/          # 共通コンポーネント
│   │   │   ├── views/               # ページコンポーネント
│   │   │   ├── stores/              # Piniaストア
│   │   │   ├── composables/         # 共通ロジック
│   │   │   ├── services/            # API呼び出し
│   │   │   ├── types/               # TypeScript型定義
│   │   │   ├── App.vue              # ルートコンポーネント
│   │   │   └── main.ts              # エントリーポイント
│   │   ├── public/                  # 静的ファイル
│   │   ├── index.html               # HTMLテンプレート
│   │   ├── package.json             # npm設定
│   │   ├── vite.config.ts           # Vite設定
│   │   └── tsconfig.json            # TypeScript設定
│   │
│   ├── backend/                     # 【移動】バックエンド（既存main/java配下）
│   │   └── ... (既存Java構成を維持)
│   │
│   └── test/                        # テスト（既存維持）
│       ├── java/                    # JUnitテスト
│       └── e2e/                     # Playwright E2Eテスト
```

---

## 11. 関連ドキュメント

| ドキュメント | 説明 |
|-------------|------|
| [basic-design-frontend.md](./basic-design-frontend.md) | フロントエンド基本設計書 |
| [basic-design-backend.md](./basic-design-backend.md) | バックエンド基本設計書 |
| [detail-design-frontend.md](./detail-design-frontend.md) | フロントエンド詳細設計書 |

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2024-12-24 | 初版作成 | - |
