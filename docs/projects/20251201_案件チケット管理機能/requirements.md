# 要件整理書

## 案件情報

| 項目 | 内容 |
|------|------|
| 案件名 | 案件チケット管理機能 |
| 案件ID | 202512_案件チケット管理機能 |
| 作成日 | 2025-12-22 |
| 作成者 | - |
| ステータス | 検討中 |

---

## 1. 案件概要

### 1.1 案件の背景

現在のToDoアプリでは、タスク（チケット）を単一のリストで管理しているが、プロジェクトや案件ごとにタスクをグループ化して管理したいというニーズがある。また、各タスクに対して開始日・終了日を設定し、スケジュール管理を行いたい。

### 1.2 案件の目的

- 複数のタスクを「案件」としてグループ化し、案件単位でタスク管理を行えるようにする
- 各タスク（チケット）に開始日・終了日を設定し、スケジュール可視化を可能にする
- 案件ごとの進捗状況を把握できるようにする

### 1.3 対象ユーザー

| ユーザー | 利用シーン |
|---------|-----------|
| 一般ユーザー | プロジェクト単位でタスクを整理し、期限管理を行いたい場合 |

---

## 2. 要求一覧

### 2.1 ビジネス要求

| ID | 要求 | 優先度 | 理由 |
|----|------|--------|------|
| BR-001 | タスクを案件ごとにグループ化できる | 必須 | プロジェクト単位の管理を可能にするため |
| BR-002 | タスクに開始日・終了日を設定できる | 必須 | スケジュール管理を行うため |
| BR-003 | 案件ごとの進捗を確認できる | 希望 | プロジェクト全体の状況把握のため |

### 2.2 ユーザー要求（ユーザーストーリー）

| ID | ユーザーストーリー | 対応BR | 優先度 |
|----|-------------------|--------|--------|
| US-001 | ユーザーとして、新しい案件を作成したい。なぜなら複数のタスクを案件ごとにまとめて管理したいから。 | BR-001 | 高 |
| US-002 | ユーザーとして、案件一覧を表示したい。なぜなら管理している案件を把握したいから。 | BR-001 | 高 |
| US-003 | ユーザーとして、案件を選択してその配下のチケットを管理したい。なぜなら案件単位で作業を進めたいから。 | BR-001 | 高 |
| US-004 | ユーザーとして、チケットに開始日を設定したい。なぜなら作業開始予定を記録したいから。 | BR-002 | 高 |
| US-005 | ユーザーとして、チケットに終了日を設定したい。なぜなら期限を明確にして管理したいから。 | BR-002 | 高 |
| US-006 | ユーザーとして、案件の進捗状況（完了率）を確認したい。なぜなら案件全体の進み具合を把握したいから。 | BR-003 | 中 |
| US-007 | ユーザーとして、案件を削除したい。なぜなら不要になった案件を整理したいから。 | BR-001 | 中 |

---

## 3. スコープ定義

### 3.1 スコープ内（In Scope）

| カテゴリ | 項目 | 説明 |
|---------|------|------|
| 機能 | 案件CRUD | 案件の作成・参照・更新・削除 |
| 機能 | チケット期間設定 | チケットへの開始日・終了日の追加 |
| 機能 | 案件別チケット表示 | 選択した案件のチケットのみ表示 |
| 機能 | 案件進捗表示 | 案件ごとの完了率表示 |
| 画面 | 案件一覧画面 | 案件を一覧表示する新規画面 |
| 画面 | ToDoリスト画面改修 | 開始日・終了日入力欄の追加、案件フィルタ対応 |
| DB | PROJECTテーブル | 案件情報を格納する新規テーブル |
| DB | TODOテーブル拡張 | 開始日・終了日・案件IDカラムの追加 |

### 3.2 スコープ外（Out of Scope）

| 項目 | 見送り理由 | 将来検討 |
|------|-----------|---------|
| ガントチャート表示 | 実装工数が大きいため初期リリースでは見送り | 可 |
| 案件の並び替え・優先度 | 最小機能に絞るため | 可 |
| 案件ごとの担当者設定 | ユーザー管理機能がないため | 可 |
| 繰り返しタスク | 複雑性が増すため | 可 |
| 案件のネスト（親子関係） | 初期リリースではフラット構造とする | 可 |

---

## 4. 機能要件

### 4.1 機能一覧

| ID | 機能名 | 概要 | 対応US | 優先度 |
|----|--------|------|--------|--------|
| F-001 | 案件作成 | 新しい案件を作成する | US-001 | 必須 |
| F-002 | 案件一覧表示 | 登録済み案件を一覧表示する | US-002 | 必須 |
| F-003 | 案件選択 | 案件を選択してチケット一覧を表示する | US-003 | 必須 |
| F-004 | 案件削除 | 案件を削除する（配下チケットも削除） | US-007 | 必須 |
| F-005 | チケット開始日設定 | チケットに開始日を設定する | US-004 | 必須 |
| F-006 | チケット終了日設定 | チケットに終了日を設定する | US-005 | 必須 |
| F-007 | 案件進捗表示 | 案件の完了率を表示する | US-006 | 希望 |
| F-008 | 案件なしチケット表示 | 案件に紐づかないチケットを表示する | - | 必須 |

### 4.2 画面一覧

| ID | 画面名 | パス | 概要 |
|----|--------|------|------|
| SC-003 | 案件一覧画面 | `/projects.html` | 案件の一覧・作成・削除を行う画面 |
| SC-002 | ToDoリスト画面（改修） | `/todos.html` | 開始日・終了日入力欄を追加、案件別表示対応 |

### 4.3 API一覧（新規・変更）

| メソッド | パス | 機能 | 種別 |
|---------|------|------|------|
| GET | /api/projects | 案件一覧取得 | 新規 |
| GET | /api/projects/{id} | 案件詳細取得 | 新規 |
| POST | /api/projects | 案件作成 | 新規 |
| PUT | /api/projects/{id} | 案件更新 | 新規 |
| DELETE | /api/projects/{id} | 案件削除 | 新規 |
| GET | /api/projects/{id}/stats | 案件統計取得 | 新規 |
| GET | /api/todos?projectId={id} | 案件別チケット取得 | 変更 |
| POST | /api/todos | チケット作成（開始日・終了日・案件ID追加） | 変更 |
| PUT | /api/todos/{id} | チケット更新（開始日・終了日・案件ID追加） | 変更 |

---

## 5. 非機能要件

### 5.1 性能要件

| 項目 | 要件 | 測定方法 |
|------|------|---------|
| API応答時間 | 500ms以内 | ブラウザ開発者ツールで計測 |
| 案件数上限 | 100件程度を想定 | - |

### 5.2 可用性要件

| 項目 | 要件 |
|------|------|
| データ永続化 | H2ファイルモードで永続化（既存仕様） |

### 5.3 セキュリティ要件

| 項目 | 対応 |
|------|------|
| 入力バリデーション | サーバーサイドでバリデーション実施 |
| 日付の妥当性検証 | 終了日が開始日より前の場合はエラー |

### 5.4 保守性要件

| 項目 | 要件 |
|------|------|
| テストカバレッジ | 主要機能に対するユニットテストを作成 |

---

## 6. 制約条件

### 6.1 技術制約

| 項目 | 制約 |
|------|------|
| フロントエンド | Vanilla JavaScript（既存技術スタックを維持） |
| バックエンド | Spring Boot + MyBatis（既存技術スタックを維持） |
| データベース | H2 Database（既存技術スタックを維持） |

### 6.2 環境制約

| 項目 | 制約 |
|------|------|
| ブラウザ | モダンブラウザ（Chrome, Firefox, Edge, Safari最新版） |

### 6.3 その他の制約

| 項目 | 制約 |
|------|------|
| 後方互換性 | 既存のチケットは「案件未設定」として扱う |

---

## 7. 前提条件

| 項目 | 前提 |
|------|------|
| 既存機能 | 現行のToDo CRUD機能は正常に動作していること |
| 開発環境 | Java 17、Maven、Node.js（必要な場合）がインストール済み |

---

## 8. 受入条件

### 8.1 機能面

| 条件 | 確認方法 |
|------|---------|
| 案件を作成できる | 案件一覧画面で新規案件を作成し、一覧に表示される |
| 案件を削除できる | 案件削除後、一覧から消え、配下のチケットも削除される |
| チケットに開始日を設定できる | チケット作成/編集時に開始日を入力し、保存後に反映される |
| チケットに終了日を設定できる | チケット作成/編集時に終了日を入力し、保存後に反映される |
| 案件別にチケットを表示できる | 案件選択後、その案件のチケットのみ表示される |
| 案件未設定のチケットを表示できる | 「案件なし」を選択すると、案件未設定のチケットが表示される |

### 8.2 非機能面

| 条件 | 確認方法 |
|------|---------|
| 既存チケットは案件未設定として表示される | 既存データが「案件なし」一覧に表示される |
| 終了日が開始日より前の場合エラーになる | バリデーションエラーメッセージが表示される |

---

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| 案件（Project） | 複数のチケットをグループ化する単位。プロジェクトや作業カテゴリを表す |
| チケット（ToDo） | 個別のタスク。既存のToDoエンティティと同義 |
| 開始日（Start Date） | チケットの作業開始予定日 |
| 終了日（Due Date） | チケットの作業完了期限日 |

---

## 10. データモデル

### 10.1 PROJECT テーブル（新規）

| カラム名 | データ型 | NULL | デフォルト | 説明 |
|---------|----------|------|-----------|------|
| ID | BIGINT | NO | AUTO_INCREMENT | 主キー |
| NAME | VARCHAR(100) | NO | - | 案件名 |
| DESCRIPTION | VARCHAR(500) | YES | NULL | 案件説明 |
| CREATED_AT | TIMESTAMP | NO | CURRENT_TIMESTAMP | 作成日時 |

### 10.2 TODO テーブル（拡張）

既存カラムに加え、以下を追加:

| カラム名 | データ型 | NULL | デフォルト | 説明 |
|---------|----------|------|-----------|------|
| PROJECT_ID | BIGINT | YES | NULL | 所属案件ID（外部キー） |
| START_DATE | DATE | YES | NULL | 開始日 |
| DUE_DATE | DATE | YES | NULL | 終了日 |

---

## 11. 関連ドキュメント

| ドキュメント | 説明 |
|-------------|------|
| [basic-design-frontend.md](./basic-design-frontend.md) | フロントエンド基本設計書 |
| [basic-design-backend.md](./basic-design-backend.md) | バックエンド基本設計書 |
| [detail-design-api.md](./detail-design-api.md) | API詳細設計書 |
| [detail-design-db.md](./detail-design-db.md) | DB詳細設計書 |
| [test-spec.md](./test-spec.md) | テスト仕様書 |

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2025-12-22 | 初版作成 | - |
